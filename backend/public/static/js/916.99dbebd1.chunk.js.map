{"version":3,"file":"static/js/916.99dbebd1.chunk.js","mappings":"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","sources":["cmps/order-confirmation/confirmation-main.jsx","cmps/order-confirmation/confirmation-sidebar.jsx","pages/order-confirmation.jsx","customHooks/useScrollToTop.js"],"sourcesContent":["// Services\r\nimport { utilService } from '../../services/util.service.js'\r\n\r\n\r\nexport function ConfirmationMain({ orderObject }) {\r\n    const { checkIn, checkOut, guestCount } = orderObject.orderDetails\r\n\r\n    const guestCountStr = `${guestCount} ${guestCount === 1 ? 'guest' : 'guests'}`\r\n    const formattedTimeRange = utilService.getFormattedTimeRange(checkIn, checkOut)\r\n    const formattedDate = utilService.getFormattedDate(\r\n        utilService.getFutureTime(2, 'day'),\r\n        {\r\n            month: 'short',\r\n            day: 'numeric',\r\n        }\r\n    )\r\n    return (\r\n        <section className='confirmation-main'>\r\n\r\n            <section className='dates-guests'>\r\n                <h3 className='fs22'>Your trip</h3>\r\n                <section className='dates fs16'>\r\n                    <h4>Dates</h4>\r\n                    <p>{formattedTimeRange}</p>\r\n                </section>\r\n                <section className='guests fs16'>\r\n                    <h4>Guests</h4>\r\n                    <p>{guestCountStr}</p>\r\n                </section>\r\n            </section>\r\n\r\n            <section className='cancellation-policy'>\r\n                <h3 className='capitalize fs22'>cancellation policy</h3>\r\n                <p>Cancel before {formattedDate} for a partial refund. After that, this reservation is non-refundable.</p>\r\n            </section>\r\n\r\n            <p className='declaration fs12 lh18'>By selecting the button below, I agree to the irrelevance of the <span className='underline'>Host's House Rules, Ground rules for guests, StayHub's Rebooking and Refund Policy</span>, and that StayHub can <span className='underline'>charge my payment method</span> if I'm responsible for damage.</p>\r\n        </section>\r\n    )\r\n}","import { utilService } from '../../services/util.service.js'\r\nimport { STAR } from '../../services/svg.service.js'\r\nimport SvgHandler from '../_reuseable-cmps/svg-handler.jsx'\r\n\r\n\r\nexport function ConfirmationSidebar({ orderObject }) {\r\n\r\n    const { stayDetails, orderPrice, orderDetails } = orderObject\r\n\r\n    const { reviewsCount, type, summary, rate, image } = stayDetails\r\n    const { nightsCount, singleNightPrice } = orderDetails\r\n    const { total, serviceFee, cleaningFee, price } = orderPrice\r\n\r\n    const singleNightPriceStr = utilService.addCommas(singleNightPrice)\r\n    const priceStr = utilService.addCommas(price)\r\n    const cleaningFeeStr = utilService.addCommas(cleaningFee)\r\n    const serviceFeeStr = utilService.addCommas(serviceFee)\r\n    const totalStr = utilService.addCommas(total)\r\n\r\n    const nightsCountStr = `${nightsCount} ${nightsCount === 1 ? 'night' : 'nights'}`\r\n    const reviewsCountStr = `${reviewsCount} ${reviewsCount === 1 ? 'review' : 'reviews'}`\r\n    return (\r\n        <aside className='confirmation-sidebar flex column'>\r\n\r\n            <section className='stay-information'>\r\n                <section className='img-container flex'>\r\n                    <img src={image} alt='stay' />\r\n                </section>\r\n                <section className='information'>\r\n                    <p className='stay-type fs12'>{type}</p>\r\n                    <span className='short-summary lh24'>{summary}</span>\r\n                    <article className='confirmation-reviews fs12 flex align-center flex-nowrap'>\r\n                        {reviewsCount > 0 && (\r\n                            <>\r\n                                <span><SvgHandler svgName={STAR} /></span>\r\n                                <span>{rate}</span>\r\n                                <span className='white-space-nowrap'>{reviewsCountStr}</span>\r\n                            </>\r\n                        )}\r\n                    </article>\r\n                </section>\r\n            </section>\r\n\r\n            <section className='price-details fs16'>\r\n                <h3 className='title fs22'>Price details</h3>\r\n                <article className='night-price flex space-between gap16'>\r\n                    <span className='underline'>${singleNightPriceStr} x {nightsCountStr}</span>\r\n                    <span>${priceStr}</span>\r\n                </article>\r\n                <article className='cleaning-fee flex space-between gap16'>\r\n                    <span className='underline'>Cleaning fee</span>\r\n                    <span>${cleaningFeeStr}</span>\r\n                </article>\r\n                <article className='service-fee flex space-between gap16'>\r\n                    <span className='underline'>StayHub service fee</span>\r\n                    <span>${serviceFeeStr}</span>\r\n                </article>\r\n                <article className='total-price flex space-between gap16 ff-circular-semibold'>\r\n                    <span>Total (USD)</span>\r\n                    <span>${totalStr}</span>\r\n                </article>\r\n            </section>\r\n        </aside>\r\n    )\r\n}","// Node modules\r\nimport { useEffect } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom'\r\n\r\n// Services\r\nimport { ARROW_LEFT } from '../services/svg.service.js'\r\nimport { socketService, SOCKET_EVENT_STAY_RESERVED } from '../services/socket.service.js'\r\nimport { showErrorMsg } from '../services/event-bus.service.js'\r\n\r\n// Store\r\nimport { addConfirmedTrip } from '../store/user.actions.js'\r\n\r\n// Custom hooks\r\nimport useScrollToTop from '../customHooks/useScrollToTop.js'\r\n\r\n// Components\r\nimport { ButtonMain } from '../cmps/_reuseable-cmps/button-main.jsx'\r\nimport SvgHandler from '../cmps/_reuseable-cmps/svg-handler.jsx'\r\nimport { Loader } from '../cmps/_reuseable-cmps/loader.jsx'\r\nimport { ConfirmationMain } from '../cmps/order-confirmation/confirmation-main.jsx'\r\nimport { ConfirmationSidebar } from '../cmps/order-confirmation/confirmation-sidebar.jsx'\r\n\r\n\r\n// TODO: set redirect when clicking back, using history, instead of new link\r\n// TODO: when logging out, redirect to stay-details\r\n\r\n\r\nexport function OrderConfirmation() {\r\n    useScrollToTop()\r\n    const navigate = useNavigate()\r\n    const location = useLocation()\r\n    const orderObject = useSelector(storeState => storeState.userModule.order)\r\n\r\n\r\n    useEffect(() => {\r\n        if (Object.keys(orderObject).length === 0) {\r\n            const pathName = location.pathname.split('/')\r\n            const newPathName = pathName.filter(name => name !== 'book').join('/')\r\n            navigate(newPathName)\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n\r\n    function onOrderConfirm(ev) {\r\n        ev.stopPropagation()\r\n        ev.preventDefault()\r\n        handleOrderConfirm()\r\n    }\r\n\r\n    async function handleOrderConfirm() {\r\n        try {\r\n            await addConfirmedTrip(orderObject)\r\n            socketService.emit(SOCKET_EVENT_STAY_RESERVED, orderObject.seller._id)\r\n            navigate('/trips')\r\n        } catch (error) {\r\n            console.error('Error adding confirmed trip:', error)\r\n            showErrorMsg('Cannot add confirmed trip')\r\n        }\r\n    }\r\n\r\n\r\n    if (Object.keys(orderObject).length === 0) return <Loader />\r\n    const stayId = orderObject.stayDetails.id\r\n    return (\r\n        <section className='order-confirmation-page' >\r\n\r\n            <section className='confirmation-header flex align-center gap20'>\r\n                <Link className='return-btn' to={`/stay/${stayId}`} title='return'>\r\n                    <SvgHandler svgName={ARROW_LEFT} />\r\n                </Link>\r\n                <h2 className='fs32'>Confirm and pay</h2>\r\n            </section>\r\n\r\n            <section className='confirmation-main-container'>\r\n                <ConfirmationMain orderObject={orderObject} />\r\n                <ConfirmationSidebar orderObject={orderObject} />\r\n            </section>\r\n\r\n            <section className='confirm-btn'>\r\n                <ButtonMain text={'Confirm and pay'} onClickButton={onOrderConfirm} />\r\n            </section>\r\n\r\n        </section>\r\n    )\r\n}","import { useEffect } from \"react\"\r\n\r\nexport default function useScrollToTop(){\r\n    useEffect(() => {\r\n        window.scrollTo({\r\n            top: 0,\r\n            left: 0,\r\n            behavior: \"smooth\"\r\n        })\r\n    }, [])\r\n}"],"names":["ConfirmationMain","orderObject","orderDetails","checkIn","checkOut","guestCount","guestCountStr","formattedTimeRange","utilService","formattedDate","month","day","className","ConfirmationSidebar","stayDetails","orderPrice","reviewsCount","type","summary","rate","image","nightsCount","singleNightPrice","total","serviceFee","cleaningFee","price","singleNightPriceStr","priceStr","cleaningFeeStr","serviceFeeStr","totalStr","nightsCountStr","reviewsCountStr","src","alt","svgName","STAR","OrderConfirmation","useEffect","window","scrollTo","top","left","behavior","navigate","useNavigate","location","useLocation","useSelector","storeState","userModule","order","addConfirmedTrip","socketService","SOCKET_EVENT_STAY_RESERVED","seller","_id","console","error","showErrorMsg","Object","keys","length","newPathName","pathname","split","filter","name","join","stayId","id","to","title","ARROW_LEFT","text","onClickButton","ev","stopPropagation","preventDefault","handleOrderConfirm"],"sourceRoot":""}