"use strict";(self.webpackChunkmy_react_starter=self.webpackChunkmy_react_starter||[]).push([[26],{9026:function(e,t,r){r.r(t),r.d(t,{UserDashboard:function(){return A}});var s=r(2791),n=r(7689),a=r(9434),c=r(4936),o=r(1306),i=r(1413),l=r(9439),d=r(5393),u=r(4165),h=r(5861),p=r(1122),x=r(8911);function f(){return(f=(0,h.Z)((0,u.Z)().mark((function e(){var t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d.h.dispatch({type:p.Ag}),e.next=4,x.X.getOrders();case 4:t=e.sent,d.h.dispatch({type:p.PM,orders:t}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error - could not get orders",e.t0),(0,o.oc)("Could not load orders");case 12:return e.prev=12,d.h.dispatch({type:p.zB}),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})))).apply(this,arguments)}function j(e){return m.apply(this,arguments)}function m(){return(m=(0,h.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d.h.dispatch({type:p.I5,orderId:t}),e.next=4,x.X.updateOrderStatus({status:"Approved",_id:t});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("error - could not approve order",e.t0),(0,o.oc)("Could not update order");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function g(e){return v.apply(this,arguments)}function v(){return(v=(0,h.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d.h.dispatch({type:p.LE,orderId:t}),e.next=4,x.X.updateOrderStatus({status:"Rejected",_id:t});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("error - could not reject order",e.t0),(0,o.oc)("Could not update order");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var b=r(5849),y=r(184);function N(e){var t=e.order,r=e.onApprove,s=e.onReject,n=t.content.status,a=t.content.buyer.img,c=t.content.buyer.fullname,o=t.content.buyer.joined,i=t.content.orderDetails,l=i.checkIn,d=i.checkOut,u=b.Y.getFormattedTimeRange(l,d);return(0,y.jsxs)("tr",{className:"flex",children:[(0,y.jsx)("td",{className:"guest-column",children:(0,y.jsxs)("section",{className:"order-guest flex align-center",children:[(0,y.jsx)("img",{src:a,alt:"guest"}),(0,y.jsxs)("article",{className:"name-and-join-date flex column",children:[(0,y.jsxs)("span",{className:"full-name",children:[" ",c]}),(0,y.jsxs)("span",{className:"join-date fs12",children:["Joined in ",o]})]})]})}),(0,y.jsx)("td",{className:"date-column",children:(0,y.jsx)("span",{className:"order-dates flex align-center",children:u})}),(0,y.jsx)("td",{className:"action-column",children:(0,y.jsx)("section",{className:"order-actions flex align-center",children:"Pending"===n?(0,y.jsxs)("article",{className:"actions flex column justify-center",children:[(0,y.jsx)("button",{className:"action-button approve",onClick:function(e){return r(e,t._id)},children:"Approve"}),(0,y.jsx)("button",{className:"action-button reject",onClick:function(e){return s(e,t._id)},children:"Reject"})]}):(0,y.jsx)("article",{className:"order-status ".concat(n.toLowerCase()," fs14"),children:n})})})]})}var Z=r(513);function k(e){e.loggedInUser;var t=(0,a.v9)((function(e){return e.orderModule.isLoadingOrders})),r=(0,a.v9)((function(e){return e.orderModule.orders})),n=(0,s.useState)(x.X.getDemoOrders()),c=(0,l.Z)(n,2),o=c[0],u=c[1];function h(e){var t=o.map((function(t){return t._id===e?(0,i.Z)((0,i.Z)({},t),{},{content:(0,i.Z)((0,i.Z)({},t.content),{},{status:"Approved"})}):t}));u(t)}function m(e){var t=o.map((function(t){return t._id===e?(0,i.Z)((0,i.Z)({},t),{},{content:(0,i.Z)((0,i.Z)({},t.content),{},{status:"Rejected"})}):t}));u(t)}function v(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.preventDefault(),e.stopPropagation(),r?h(t):j(t)}function b(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.preventDefault(),e.stopPropagation(),r?m(t):g(t)}return(0,s.useEffect)((function(){return function(){f.apply(this,arguments)}(),function(){d.h.dispatch({type:p.zB})}}),[]),(0,s.useEffect)((function(){console.log("allOrders",r)}),[r]),t?(0,y.jsx)(Z.a,{}):(0,y.jsx)("section",{className:"order-list",children:(0,y.jsxs)("table",{children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{className:"flex",children:[(0,y.jsx)("th",{className:"guest-column",children:"Guest"}),(0,y.jsx)("th",{className:"date-column",children:"Dates"}),(0,y.jsx)("th",{className:"action-column",children:"Actions"})]})}),(0,y.jsxs)("tbody",{children:[r.map((function(e){return(0,y.jsx)(N,{order:e,onApprove:v,onReject:b},e._id)})),0===r.length&&o.map((function(e){return(0,y.jsx)(N,{order:e,onApprove:function(e,t){return v(e,t,!0)},onReject:function(e,t){return b(e,t,!0)}},e._id)}))]})]})})}var D=r(3623),w=r(5967);function R(e){var t=e.dashboardData,r={labels:t.labels,datasets:[{label:"Revenue generated per month",data:t.revenue,backgroundColor:["rgba(54, 162, 235, 0.5)","rgba(255, 206, 86, 0.5)","rgba(75, 192, 192, 0.5)","rgba(153, 102, 255, 0.5)","rgba(255, 159, 64, 0.5)","rgba(128, 0, 128, 0.5)"]}]};return(0,y.jsx)("section",{className:"chart-container flex justify-center",children:(0,y.jsx)(D.$Q,{options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Revenue overview"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return"$"+e}}},x:{grid:{display:!1}}}},data:r})})}w.kL.register(w.uw,w.f$,w.ZL,w.Dx,w.u,w.De);var _=r(4942);function C(e){var t=e.dashboardData,r={responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Occupancy rate"}},scales:(0,_.Z)({y:{beginAtZero:!0},x:{grid:{display:!1}}},"y",{grid:{display:!0}})},s={labels:t.labels,datasets:[{label:"Occupancy",data:t.occupancyRate,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]};return(0,y.jsx)("section",{className:"chart-container flex justify-center",children:(0,y.jsx)(D.x1,{options:r,data:s})})}function O(e){var t=e.dashboardData;var r=(t.revenue.reduce((function(e,t){return e+t}),0)/t.revenue.length).toLocaleString(void 0,{maximumFractionDigits:2});return(0,y.jsxs)("section",{className:"dashboard-statistics",children:[(0,y.jsxs)("article",{className:"statistics-revenue",children:[(0,y.jsx)("h2",{className:"statistics-header",children:"Total revenue"}),(0,y.jsxs)("section",{className:"statistics-body",children:[(0,y.jsxs)("article",{className:"flex space-between",children:[(0,y.jsx)("h3",{children:"Revenue:"}),(0,y.jsxs)("h3",{children:["$",r]})]}),(0,y.jsxs)("article",{className:"flex space-between",children:[(0,y.jsx)("h3",{children:"Occupancy:"}),(0,y.jsxs)("h3",{children:[61.83,"%"]})]})]})]}),(0,y.jsxs)("article",{className:"statistics-chart-bar",children:[(0,y.jsx)("h2",{className:"statistics-header",children:"Revenue per month"}),(0,y.jsx)(R,{dashboardData:t})]}),(0,y.jsxs)("article",{className:"statistics-chart-line",children:[(0,y.jsx)("h2",{className:"statistics-header",children:"Occupancy rate"}),(0,y.jsx)(C,{dashboardData:t})]})]})}function A(){var e=(0,a.v9)((function(e){return e.userModule.user})),t=(0,n.s0)(),r=c.W.getUserDashboardData();return(0,s.useEffect)((function(){e||((0,o.oc)("You must be logged in to view your listings"),t("/"))}),[e]),(0,y.jsxs)("section",{className:"dashboard-page",children:[(0,y.jsx)("h1",{className:"dashboard-page-title fs30",children:"My Dashboard"}),(0,y.jsx)(O,{dashboardData:r}),(0,y.jsx)(k,{loggedInUser:e})]})}w.kL.register(w.uw,w.f$,w.od,w.jn,w.Dx,w.u,w.De)}}]);
//# sourceMappingURL=26.36739a41.chunk.js.map