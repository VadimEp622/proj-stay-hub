{"version":3,"file":"static/js/706.10e43d7e.chunk.js","mappings":"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","sources":["cmps/stay-index/stay-list/stay-preview/preview-image-carousel.jsx","cmps/stay-index/stay-list/stay-preview.jsx","cmps/stay-index/stay-list.jsx","customHooks/useGeoLocation.js","services/category-images.service.js","cmps/stay-index/category-filter/category-carousel.jsx","cmps/stay-index/category-filter.jsx","pages/stay-index.jsx","customHooks/useStaysInfiniteScroll.js"],"sourcesContent":["import { Link } from 'react-router-dom'\r\nimport Carousel from 'react-multi-carousel'\r\nimport 'react-multi-carousel/lib/styles.css'\r\nimport { ARROW_LEFT, ARROW_RIGHT } from '../../../../services/svg.service.js'\r\nimport SvgHandler from '../../../_reuseable-cmps/svg-handler.jsx'\r\n\r\n\r\nexport function PreviewImageCarousel({ imgs, stay }) {\r\n\r\n    const CustomLeftArrow = ({ onClick }) => (\r\n        <button className='custom-arrow left' onClick={onClick} >\r\n            <SvgHandler svgName={ARROW_LEFT} />\r\n        </button >\r\n    )\r\n\r\n    const CustomRightArrow = ({ onClick }) => (\r\n        <button className='custom-arrow right' onClick={onClick}  >\r\n            <SvgHandler svgName={ARROW_RIGHT} />\r\n        </button >\r\n    )\r\n\r\n    const responsive = {\r\n        desktop: {\r\n            breakpoint: {\r\n                max: 3000,\r\n                min: 1024\r\n            },\r\n            items: 1,\r\n        },\r\n        tablet: {\r\n            breakpoint: {\r\n                max: 1024,\r\n                min: 464\r\n            },\r\n            items: 1,\r\n        },\r\n        mobile: {\r\n            breakpoint: {\r\n                max: 464,\r\n                min: 0\r\n            },\r\n            items: 1,\r\n        },\r\n    }\r\n\r\n    return (\r\n        <Carousel\r\n            additionalTransfrom={0}\r\n            arrows={true}\r\n            centerMode={false}\r\n            className='preview-image-carousel'\r\n            customLeftArrow={<CustomLeftArrow />}\r\n            customRightArrow={<CustomRightArrow />}\r\n            customTransition='transform 300ms ease-in-out'\r\n            dotListClass='dot-container'\r\n            draggable={false}\r\n            focusOnSelect={false}\r\n            infinite={false}\r\n            itemClass=''\r\n            minimumTouchDrag={80}\r\n            // removeArrowOnDeviceType={[\"tablet\", \"mobile\"]}\r\n            renderArrowsWhenDisabled={false}\r\n            renderButtonGroupOutside={false}\r\n            renderDotsOutside={false}\r\n            responsive={responsive}\r\n            rtl={false}\r\n            showDots={true}\r\n            sliderClass=''\r\n            slidesToSlide={1}\r\n            swipeable={true}\r\n        >\r\n            {\r\n                imgs.map((img, index) =>\r\n                    <Link key={index} to={`/stay/${stay._id}`}>\r\n                        <img\r\n                            src={img}\r\n                            alt={`stay-pic-${index}`}\r\n                        />\r\n                    </Link>\r\n                )\r\n            }\r\n        </Carousel>\r\n    )\r\n}\r\n","// Node modules\r\nimport { Link } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\n\r\n// Services\r\nimport { stayService } from '../../../services/stay.service.js'\r\nimport { utilService } from '../../../services/util.service.js'\r\nimport { HEART_24_WHITE_STROKE, HEART_24_WHITE_STROKE_RED_FILL, STAR_12 } from '../../../services/svg.service.js'\r\n\r\n// Store\r\nimport { toggleWishlist } from '../../../store/user.actions.js'\r\nimport { SET_APP_MODAL_LOGIN } from '../../../store/system.reducer.js'\r\nimport { setAppModal } from '../../../store/system.action.js'\r\n\r\n// Components\r\nimport { PreviewImageCarousel } from './stay-preview/preview-image-carousel.jsx'\r\nimport SvgHandler from '../../_reuseable-cmps/svg-handler.jsx'\r\n\r\n\r\n// **TODO: stay-preview should be a dumb component(!!!), that only display data, and not calculate inside it with functions(!!!)\r\n\r\nexport function StayPreview({ stay, geoLocation, isMobile, lastStayElementRef = null }) {\r\n    const loggedInUser = useSelector(storeState => storeState.userModule.user)\r\n\r\n    // function getResizeMobilePictures() {\r\n    // if (!isMobile) return stay.imgUrls\r\n\r\n    // const stayImages = stay.imgUrls.map((imgStr) => {\r\n    //     const strIdx = imgStr.indexOf('/upload/') + 8\r\n    //     const firstPart = imgStr.substring(0, strIdx)\r\n    //     const middlePart = 'c_fit,w_500/'\r\n    //     const lastPart = imgStr.substring(strIdx)\r\n    //     return firstPart + middlePart + lastPart\r\n    // })\r\n\r\n    // return stayImages\r\n    // }\r\n\r\n\r\n    function isStayWishlist() {\r\n        return loggedInUser?.wishlist?.some(wishlist => wishlist._id === stay._id)\r\n    }\r\n\r\n    function onLikeClicked(ev) {\r\n        ev.preventDefault()\r\n        ev.stopPropagation()\r\n        if (!loggedInUser) {\r\n            setAppModal(SET_APP_MODAL_LOGIN)\r\n            return\r\n        }\r\n        toggleWishlist(loggedInUser, stay)\r\n    }\r\n\r\n    function calcCrow(lat1, lon1, lat2, lon2) {\r\n        const R = 6371 // km\r\n        const dLat = toRad(lat2 - lat1)\r\n        const dLon = toRad(lon2 - lon1)\r\n        lat1 = toRad(lat1)\r\n        lat2 = toRad(lat2)\r\n\r\n        const a =\r\n            Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n            Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2)\r\n        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))\r\n        const d = R * c\r\n        return utilService.addCommas(d)\r\n    }\r\n\r\n    // Converts numeric degrees to radians\r\n    function toRad(Value) {\r\n        return Value * Math.PI / 180\r\n    }\r\n\r\n    function getDistance() {\r\n        const distance = calcCrow(geoLocation.coordinates.lat, geoLocation.coordinates.lng, stay.loc.lat, stay.loc.lan)\r\n        return `${distance} kilometers away`\r\n    }\r\n\r\n\r\n    // TODO: make it so that if user filtered by dates, don't display range for dates before those filtered dates,\r\n    //   in stay-preview\r\n    const dateRange = utilService.getStayPreviewDateRange(\r\n        stay.availableDates[0].daysFromToday,\r\n        stay.availableDates[0].until\r\n    )\r\n    const stayScore = stayService.getStayScore(stay.reviews)\r\n    return (\r\n        <section className='stay-preview' key={stay._id} ref={lastStayElementRef}>\r\n            <PreviewImageCarousel imgs={stay.imgUrls} stay={stay} />\r\n\r\n            <section className='heart-svg' onClick={(ev) => onLikeClicked(ev)}>\r\n                <SvgHandler svgName={isStayWishlist() ? HEART_24_WHITE_STROKE_RED_FILL : HEART_24_WHITE_STROKE} />\r\n            </section>\r\n\r\n            <Link to={`/stay/${stay._id}`}>\r\n                <section className='preview-info fs15'>\r\n\r\n                    <section className='preview-header flex space-between align-center'>\r\n                        <p className='ff-circular-semibold lh19'>{stay.loc.city}, {stay.loc.country}</p>\r\n                        <p className='review-score flex align-baseline lh19'>\r\n                            <SvgHandler svgName={STAR_12} />\r\n                            <span className='lh19'>{stayScore}</span>\r\n                        </p>\r\n                    </section>\r\n\r\n                    <p className='type-or-distance lh19'>\r\n                        {\r\n                            geoLocation.loaded && geoLocation?.coordinates\r\n                                ? getDistance()\r\n                                : stay.type || 'Other'\r\n                        }\r\n                    </p>\r\n\r\n                    <p className='date-range lh19'>{dateRange}</p>\r\n\r\n                    <p className='price-preview lh19'>\r\n                        <span className='ff-circular-semibold'>{`$${utilService.addCommas(stay.price)} `}</span>\r\n                        night\r\n                    </p>\r\n\r\n                </section>\r\n            </Link>\r\n        </section>\r\n    )\r\n}","import { useSelector } from 'react-redux'\r\nimport { StayPreview } from './stay-list/stay-preview.jsx'\r\nimport { Loader } from '../_reuseable-cmps/loader.jsx'\r\nimport useIsMobile from '../../customHooks/useIsMobile.js'\r\n\r\n\r\n// TODO: improve stay-list cmp structure + styling\r\n\r\nexport function StayList({ stays, geoLocation, lastStayElementRef = null }) {\r\n    const isLoading = useSelector(storeState => storeState.systemModule.isLoading)\r\n    const isMobile = useIsMobile()\r\n    if (isLoading) return <Loader />\r\n    return (\r\n        <section className='stay-list'>\r\n            {stays.length < 1 && <span>No Stays Available</span>}\r\n            {stays.map((stay, index) =>\r\n                <StayPreview key={stay._id} stay={stay} geoLocation={geoLocation} isMobile={isMobile}\r\n                    lastStayElementRef={(lastStayElementRef && stays.length === index + 1) ? lastStayElementRef : null}\r\n                />\r\n            )}\r\n        </section>\r\n    )\r\n}\r\n","import { useState, useEffect } from 'react'\r\n\r\n\r\n/**\r\n * @typedef {Object} Coordinates\r\n * @property {string} lat - The latitude.\r\n * @property {string} lng - The longitude.\r\n * \r\n * @typedef {Object} Error\r\n * @property {number} code - Error Type Code\r\n * @property {string} message - Error description\r\n * \r\n * @typedef {Object} Location\r\n * @property {boolean} loaded - Is geolocation loaded\r\n * @property {Coordinates} [coordinates] - geolocation coordinates object\r\n * @property {Error} [error] - Error object, if any error occurs\r\n */\r\n\r\n\r\n/**\r\n * @function\r\n * @returns {Location} - The location object. If geolocation is available and loaded, \r\n * the `coordinates` property will contain the latitude and longitude. If an error occurs \r\n * while trying to fetch the geolocation, the `error` property will contain the error code \r\n * and message.\r\n */\r\n\r\n\r\nexport default function useGeoLocation() {\r\n    const [location, setLocation] = useState({\r\n        loaded: false,\r\n        coordinates: { lat: '', lng: '' },\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (!('geolocation' in navigator)) {\r\n            onError({\r\n                code: 0,\r\n                message: 'Geolocation not supported',\r\n            })\r\n        }\r\n\r\n        navigator.geolocation.getCurrentPosition(onSuccess, onError)\r\n    }, [])\r\n\r\n\r\n    function onSuccess(location) {\r\n        setLocation({\r\n            loaded: true,\r\n            coordinates: {\r\n                lat: location.coords.latitude,\r\n                lng: location.coords.longitude,\r\n            },\r\n        })\r\n    }\r\n\r\n    function onError(error) {\r\n        setLocation({\r\n            loaded: true,\r\n            error: {\r\n                code: error.code,\r\n                message: error.message,\r\n            },\r\n        })\r\n    }\r\n\r\n    return location\r\n}","// *********************** IMAGE IMPORTS ***********************\r\nimport adapted from \"../assets/img/category-bar/adapted.jpeg\"\r\nimport aFrames from \"../assets/img/category-bar/a-frames.jpeg\"\r\nimport amazingPools from \"../assets/img/category-bar/amazing-pools.jpeg\"\r\nimport amazingViews from \"../assets/img/category-bar/amazing-views.jpeg\"\r\nimport arctic from \"../assets/img/category-bar/arctic.jpeg\"\r\nimport barns from \"../assets/img/category-bar/barns.jpeg\"\r\nimport beach from \"../assets/img/category-bar/beach.jpeg\"\r\nimport beachfront from \"../assets/img/category-bar/beachfront.jpeg\"\r\nimport bedAndBreakfast from \"../assets/img/category-bar/bed-and-breakfast.jpeg\"\r\nimport boats from \"../assets/img/category-bar/boats.jpeg\"\r\nimport cabins from \"../assets/img/category-bar/cabins.jpeg\"\r\nimport campers from \"../assets/img/category-bar/campers.jpeg\"\r\nimport camping from \"../assets/img/category-bar/camping.jpeg\"\r\nimport casasParticulares from \"../assets/img/category-bar/casas-particulares.jpeg\"\r\nimport castles from \"../assets/img/category-bar/castles.jpeg\"\r\nimport caves from \"../assets/img/category-bar/caves.jpeg\"\r\nimport chefsKitchens from \"../assets/img/category-bar/chefs-kitchens.jpeg\"\r\nimport containers from \"../assets/img/category-bar/containers.jpeg\"\r\nimport countrySide from \"../assets/img/category-bar/countryside.jpeg\"\r\nimport creativeSpaces from \"../assets/img/category-bar/creative-spaces.jpeg\"\r\nimport cycladicHomes from \"../assets/img/category-bar/cycladic-homes.jpeg\"\r\nimport dammusi from \"../assets/img/category-bar/dammusi.jpeg\"\r\nimport desert from \"../assets/img/category-bar/desert.jpeg\"\r\nimport design from \"../assets/img/category-bar/design.jpeg\"\r\nimport domes from \"../assets/img/category-bar/domes.jpeg\"\r\nimport earthHomes from \"../assets/img/category-bar/earth-homes.jpeg\"\r\nimport farms from \"../assets/img/category-bar/farms.jpeg\"\r\nimport golfing from \"../assets/img/category-bar/golfing.jpeg\"\r\nimport grandPianos from \"../assets/img/category-bar/grand-pianos.jpeg\"\r\nimport hanoks from \"../assets/img/category-bar/hanoks.jpeg\"\r\nimport historicalHomes from \"../assets/img/category-bar/historical-homes.jpeg\"\r\nimport houseBoats from \"../assets/img/category-bar/houseboats.jpeg\"\r\nimport iconicCities from \"../assets/img/category-bar/iconic-cities.jpeg\"\r\nimport islands from \"../assets/img/category-bar/islands.jpeg\"\r\nimport lake from \"../assets/img/category-bar/lake.jpeg\"\r\nimport lakefront from \"../assets/img/category-bar/lakefront.jpeg\"\r\nimport luxe from \"../assets/img/category-bar/luxe.jpeg\"\r\nimport mansions from \"../assets/img/category-bar/mansions.jpeg\"\r\nimport minsus from \"../assets/img/category-bar/minsus.jpeg\"\r\nimport nationalParks from \"../assets/img/category-bar/national-parks.jpeg\"\r\nimport New from \"../assets/img/category-bar/new.jpeg\"\r\nimport offTheGrid from \"../assets/img/category-bar/off-the-grid.jpeg\"\r\nimport omg from \"../assets/img/category-bar/omg.jpeg\"\r\nimport play from \"../assets/img/category-bar/play.jpeg\"\r\nimport riads from \"../assets/img/category-bar/riads.jpeg\"\r\nimport rooms from \"../assets/img/category-bar/rooms.jpeg\"\r\nimport ryokans from \"../assets/img/category-bar/ryokans.jpeg\"\r\nimport shepherdsHuts from \"../assets/img/category-bar/shepherds-huts.jpeg\"\r\nimport skiing from \"../assets/img/category-bar/skiing.jpeg\"\r\nimport skiInOut from \"../assets/img/category-bar/ski-in-out.jpeg\"\r\nimport surfing from \"../assets/img/category-bar/surfing.jpeg\"\r\nimport topOfTheWorld from \"../assets/img/category-bar/top-of-the-world.jpeg\"\r\nimport towers from \"../assets/img/category-bar/towers.jpeg\"\r\nimport trending from \"../assets/img/category-bar/trending.jpeg\"\r\nimport tropical from \"../assets/img/category-bar/tropical.jpeg\"\r\nimport trulli from \"../assets/img/category-bar/trulli.jpeg\"\r\nimport vineyards from \"../assets/img/category-bar/vineyards.jpeg\"\r\nimport tinyHomes from \"../assets/img/category-bar/tiny-homes.jpeg\"\r\nimport treehouses from \"../assets/img/category-bar/treehouses.jpeg\"\r\nimport windmills from \"../assets/img/category-bar/windmills.jpeg\"\r\nimport yurts from \"../assets/img/category-bar/yurts.jpeg\"\r\n\r\nexport const categoryImages = [\r\n    {\r\n        label: \"OMG!\",\r\n        imgSrc: omg\r\n    },\r\n    {\r\n        label: \"Trending\",\r\n        imgSrc: trending\r\n    },\r\n    {\r\n        label: \"Rooms\",\r\n        imgSrc: rooms\r\n    },\r\n    {\r\n        label: \"Cabins\",\r\n        imgSrc: cabins\r\n    },\r\n    {\r\n        label: \"Design\",\r\n        imgSrc: design\r\n    },\r\n    {\r\n        label: \"Beach\",\r\n        imgSrc: beach\r\n    },\r\n    {\r\n        label: \"Desert\",\r\n        imgSrc: desert\r\n    },\r\n    {\r\n        label: \"Mansions\",\r\n        imgSrc: mansions\r\n    },\r\n    {\r\n        label: \"Beachfront\",\r\n        imgSrc: beachfront\r\n    },\r\n    {\r\n        label: \"Amazing views\",\r\n        imgSrc: amazingViews\r\n    },\r\n    {\r\n        label: \"Amazing pools\",\r\n        imgSrc: amazingPools\r\n    },\r\n    {\r\n        label: \"Luxe\",\r\n        imgSrc: luxe\r\n    },\r\n    {\r\n        label: \"Lakefront\",\r\n        imgSrc: lakefront\r\n    },\r\n    {\r\n        label: \"Castles\",\r\n        imgSrc: castles\r\n    },\r\n    {\r\n        label: \"Tropical\",\r\n        imgSrc: tropical\r\n    },\r\n    {\r\n        label: \"Countryside\",\r\n        imgSrc: countrySide\r\n    },\r\n    {\r\n        label: \"Islands\",\r\n        imgSrc: islands\r\n    },\r\n    {\r\n        label: \"National parks\",\r\n        imgSrc: nationalParks\r\n    },\r\n    {\r\n        label: \"Farms\",\r\n        imgSrc: farms\r\n    },\r\n    {\r\n        label: \"Vineyards\",\r\n        imgSrc: vineyards\r\n    },\r\n    {\r\n        label: \"Boats\",\r\n        imgSrc: boats\r\n    },\r\n    {\r\n        label: \"Off-the-grid\",\r\n        imgSrc: offTheGrid\r\n    },\r\n    {\r\n        label: \"New\",\r\n        imgSrc: New\r\n    },\r\n    {\r\n        label: \"Treehouses\",\r\n        imgSrc: treehouses\r\n    },\r\n    {\r\n        label: \"Tiny homes\",\r\n        imgSrc: tinyHomes\r\n    },\r\n    {\r\n        label: \"Iconic cities\",\r\n        imgSrc: iconicCities\r\n    },\r\n    {\r\n        label: \"Camping\",\r\n        imgSrc: camping\r\n    },\r\n    {\r\n        label: \"Earth homes\",\r\n        imgSrc: earthHomes\r\n    },\r\n    {\r\n        label: \"Skiing\",\r\n        imgSrc: skiing\r\n    },\r\n    {\r\n        label: \"Caves\",\r\n        imgSrc: caves\r\n    },\r\n    {\r\n        label: \"Creative spaces\",\r\n        imgSrc: creativeSpaces\r\n    },\r\n    {\r\n        label: \"Cycladic homes\",\r\n        imgSrc: cycladicHomes\r\n    },\r\n    {\r\n        label: \"Top-of-the-world\",\r\n        imgSrc: topOfTheWorld\r\n    },\r\n    {\r\n        label: \"Arctic\",\r\n        imgSrc: arctic\r\n    },\r\n    {\r\n        label: \"Surfing\",\r\n        imgSrc: surfing\r\n    },\r\n    {\r\n        label: \"Play\",\r\n        imgSrc: play\r\n    },\r\n    {\r\n        label: \"Riads\",\r\n        imgSrc: riads\r\n    },\r\n    {\r\n        label: \"Houseboats\",\r\n        imgSrc: houseBoats\r\n    },\r\n    {\r\n        label: \"Grand pianos\",\r\n        imgSrc: grandPianos\r\n    },\r\n    {\r\n        label: \"Domes\",\r\n        imgSrc: domes\r\n    },\r\n    {\r\n        label: \"Yurts\",\r\n        imgSrc: yurts\r\n    },\r\n    {\r\n        label: \"Bed & breakfast\",\r\n        imgSrc: bedAndBreakfast\r\n    },\r\n    {\r\n        label: \"Historical homes\",\r\n        imgSrc: historicalHomes\r\n    },\r\n\r\n    {\r\n        label: \"Ski-in/out\",\r\n        imgSrc: skiInOut\r\n    },\r\n    {\r\n        label: \"A-frames\",\r\n        imgSrc: aFrames\r\n    },\r\n    {\r\n        label: \"Containers\",\r\n        imgSrc: containers\r\n    },\r\n    {\r\n        label: \"Ryokans\",\r\n        imgSrc: ryokans\r\n    },\r\n    {\r\n        label: \"Casas particulares\",\r\n        imgSrc: casasParticulares\r\n    },\r\n    {\r\n        label: \"Barns\",\r\n        imgSrc: barns\r\n    },\r\n    {\r\n        label: \"Dammusi\",\r\n        imgSrc: dammusi\r\n    },\r\n    {\r\n        label: \"Chef's kitchens\",\r\n        imgSrc: chefsKitchens\r\n    },\r\n    {\r\n        label: \"Minsus\",\r\n        imgSrc: minsus\r\n    },\r\n    {\r\n        label: \"Towers\",\r\n        imgSrc: towers\r\n    },\r\n    {\r\n        label: \"Shepherd's huts\",\r\n        imgSrc: shepherdsHuts\r\n    },\r\n    {\r\n        label: \"Hanoks\",\r\n        imgSrc: hanoks\r\n    },\r\n    {\r\n        label: \"Windmills\",\r\n        imgSrc: windmills\r\n    },\r\n    {\r\n        label: \"Golfing\",\r\n        imgSrc: golfing\r\n    },\r\n    {\r\n        label: \"Campers\",\r\n        imgSrc: campers\r\n    },\r\n    {\r\n        label: \"Adapted\",\r\n        imgSrc: adapted\r\n    },\r\n    {\r\n        label: \"Trulli\",\r\n        imgSrc: trulli\r\n    },\r\n    {\r\n        label: \"Lake\",\r\n        imgSrc: lake\r\n    }\r\n]","// Node modules\r\nimport Carousel from 'react-multi-carousel'\r\nimport 'react-multi-carousel/lib/styles.css'\r\n\r\n// Services\r\nimport { ARROW_LEFT_FAT, ARROW_RIGHT_FAT } from '../../../services/svg.service.js'\r\n\r\n// Components\r\nimport SvgHandler from '../../_reuseable-cmps/svg-handler.jsx'\r\n\r\n\r\n\r\nexport function CategoryCarousel({ images, selectedCategory, handleClick }) {\r\n    const isMobileDevice = window.innerWidth <= 464\r\n\r\n    const CustomLeftArrow = ({ onClick }) => (\r\n        <section className='custom-arrow-container left'>\r\n            <button className='custom-arrow left' onClick={onClick} >\r\n                <SvgHandler svgName={ARROW_LEFT_FAT} />\r\n            </button >\r\n        </section>\r\n    )\r\n\r\n    const CustomRightArrow = ({ onClick }) => (\r\n        <section className='custom-arrow-container right'>\r\n            <button className='custom-arrow right' onClick={onClick}  >\r\n                <SvgHandler svgName={ARROW_RIGHT_FAT} />\r\n            </button >\r\n        </section>\r\n    )\r\n\r\n    const responsive = {\r\n        desktop: {\r\n            breakpoint: {\r\n                max: 3000,\r\n                min: 1700\r\n            },\r\n            items: 17,\r\n            slidesToSlide: 6\r\n        },\r\n        desktopSmall: {\r\n            breakpoint: {\r\n                max: 1700,\r\n                min: 1400\r\n            },\r\n            items: 13,\r\n            slidesToSlide: 6\r\n        },\r\n        tabletLarge: {\r\n            breakpoint: {\r\n                max: 1400,\r\n                min: 1200\r\n            },\r\n            items: 11,\r\n            slidesToSlide: 3\r\n        },\r\n        tabletMedium: {\r\n            breakpoint: {\r\n                max: 1200,\r\n                min: 1000\r\n            },\r\n            items: 9,\r\n            slidesToSlide: 3\r\n        },\r\n        tabletSmall: {\r\n            breakpoint: {\r\n                max: 1000,\r\n                min: 800\r\n            },\r\n            items: 7,\r\n            slidesToSlide: 3\r\n        },\r\n        mobileLarge: {\r\n            breakpoint: {\r\n                max: 800,\r\n                min: 599\r\n            },\r\n            items: 6,\r\n            slidesToSlide: 3\r\n        },\r\n        mobileMedium: {\r\n            breakpoint: {\r\n                max: 599,\r\n                min: 500\r\n            },\r\n            items: 4,\r\n            slidesToSlide: 3\r\n        },\r\n        mobileSmall: {\r\n            breakpoint: {\r\n                max: 500,\r\n                min: 400\r\n            },\r\n            items: 3,\r\n            slidesToSlide: 2\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Carousel\r\n            centerMode={false}\r\n            draggable={isMobileDevice}\r\n            partialVisible={false}\r\n            customLeftArrow={<CustomLeftArrow />}\r\n            customRightArrow={<CustomRightArrow />}\r\n            minimumTouchDrag={80}\r\n            renderArrowsWhenDisabled={false}\r\n            arrows\r\n            className='category-bar'\r\n            itemClass='category-item width-100-percent'\r\n            renderButtonGroupOutside={false}\r\n            responsive={responsive}\r\n            rewind={true}\r\n            rtl={false}\r\n            slidesToSlide={1}\r\n            swipeable={true}\r\n            infinite={false}\r\n        >\r\n            {\r\n                images.map((img, index) => (\r\n                    <section\r\n                        key={index}\r\n                        className={`img-container${selectedCategory === img.label ? ' active' : ''}`}\r\n                        onClick={(ev) => handleClick(ev, img.label)}\r\n                    >\r\n                        <img\r\n                            key={index}\r\n                            src={img.imgSrc}\r\n                            alt={index}\r\n                        />\r\n                        <label><span>{img.label}</span></label>\r\n                    </section>\r\n                ))\r\n            }\r\n        </Carousel>\r\n    )\r\n}","// Node modules\r\nimport { useState } from 'react'\r\n\r\n// Store\r\nimport { updateFilterBy } from '../../store/stay.actions.js'\r\n\r\n// Services\r\nimport { categoryImages } from '../../services/category-images.service.js'\r\n\r\n// Components\r\nimport { CategoryCarousel } from './category-filter/category-carousel.jsx'\r\n\r\n\r\n// TODO: add 'Your Search' category in category-filter cmp, for user input filter search results, outside of category filter results\r\n\r\nexport function CategoryFilter() {\r\n    const [selectedCategory, setSelectedCategory] = useState('OMG!')\r\n\r\n    function handleClick(ev, label) {\r\n        ev.preventDefault()\r\n        setSelectedCategory(label)\r\n        updateFilterBy({ label: label })\r\n    }\r\n\r\n    return (\r\n        <section className='category-filter'>\r\n            <section className='category-carousel-container'>\r\n                <CategoryCarousel images={categoryImages} selectedCategory={selectedCategory} handleClick={handleClick} />\r\n            </section>\r\n        </section>\r\n    )\r\n}\r\n","// Node Modules\r\nimport { useEffect } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { Helmet } from 'react-helmet-async'\r\n\r\n// Store\r\nimport { store } from '../store/store.js'\r\nimport { loadStays } from '../store/stay.actions.js'\r\nimport { CLOSE_EXPANDED_HEADER, CLOSE_EXPANDED_HEADER_MODAL, REMOVE_UNCLICKABLE_BG } from '../store/system.reducer.js'\r\n\r\n// Custom hook\r\nimport useGeoLocation from '../customHooks/useGeoLocation.js'\r\nimport useStaysInfiniteScroll from '../customHooks/useStaysInfiniteScroll.js'\r\n\r\n// Components\r\nimport { CategoryFilter } from '../cmps/stay-index/category-filter.jsx'\r\nimport { StayList } from '../cmps/stay-index/stay-list.jsx'\r\nimport { Loader } from '../cmps/_reuseable-cmps/loader.jsx'\r\n\r\n\r\nexport function StayIndex() {\r\n    const stays = useSelector(storeState => storeState.stayModule.stays)\r\n    const filterBy = useSelector(storeState => storeState.stayModule.filterBy)\r\n    const isSetParamsToFilterBy = useSelector(storeState => storeState.stayModule.isSetParamsToFilterBy)\r\n    const isFilterExpanded = useSelector(storeState => storeState.systemModule.isFilterExpanded)\r\n    const geoLocation = useGeoLocation()\r\n    const [isLoadingMoreStays, lastStayElementRef] = useStaysInfiniteScroll(filterBy)\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if (isSetParamsToFilterBy) loadStays(filterBy)\r\n    }, [filterBy, isSetParamsToFilterBy])\r\n\r\n\r\n\r\n    // TODO: currently only works as in stay-index, it needs to work across the whole app, + make into custom hook\r\n    useEffect(() => {\r\n        function handleScroll() {\r\n            if (isFilterExpanded) {\r\n                store.dispatch({ type: CLOSE_EXPANDED_HEADER })\r\n                store.dispatch({ type: CLOSE_EXPANDED_HEADER_MODAL })\r\n                store.dispatch({ type: REMOVE_UNCLICKABLE_BG })\r\n            }\r\n            window.removeEventListener('scroll', handleScroll)\r\n        }\r\n\r\n        window.addEventListener('scroll', handleScroll)\r\n        return () => {\r\n            window.removeEventListener('scroll', handleScroll)\r\n        }\r\n    }, [isFilterExpanded])\r\n\r\n\r\n    return (\r\n        <section className='stay-index'>\r\n            <Helmet>\r\n                <title>StayHub Stays</title>\r\n                <meta name='description' content='Check out our beautiful stays' />\r\n            </Helmet>\r\n            <CategoryFilter />\r\n            <StayList stays={stays} geoLocation={geoLocation} lastStayElementRef={lastStayElementRef} />\r\n            {isLoadingMoreStays && <Loader />}\r\n        </section >\r\n    )\r\n}\r\n","import { useCallback, useEffect, useRef } from \"react\"\r\nimport { useSelector } from \"react-redux\"\r\nimport { loadMoreStays } from \"../store/stay.actions\"\r\n\r\n\r\n\r\nexport default function useStaysInfiniteScroll(filterBy) {\r\n    const isLoading = useSelector(storeState => storeState.systemModule.isLoading)\r\n    const isLoadingMoreStays = useSelector(storeState => storeState.stayModule.isLoadingMoreStays)\r\n    const page = useSelector(storeState => storeState.stayModule.page)\r\n    const isFinalPage = useSelector(storeState => storeState.stayModule.isFinalPage)\r\n\r\n\r\n    const observer = useRef()\r\n    const lastStayElementRef = useCallback(node => {\r\n        if (isLoading) return\r\n        if (observer.current) observer.current.disconnect()\r\n        observer.current = new IntersectionObserver(entries => {\r\n            if (entries[0].isIntersecting && !isLoadingMoreStays && !isFinalPage) {\r\n                console.log('Visible')\r\n                loadMoreStays(filterBy, page + 1)\r\n            }\r\n        })\r\n        if (node) observer.current.observe(node)\r\n        \r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [isLoading, page, isFinalPage])\r\n\r\n\r\n    // Cleanup function\r\n    useEffect(() => {\r\n        return () => {\r\n            if (observer.current) observer.current.disconnect()\r\n        }\r\n    }, [])\r\n\r\n\r\n    return [isLoadingMoreStays, lastStayElementRef]\r\n}"],"names":["PreviewImageCarousel","imgs","stay","CustomLeftArrow","onClick","className","svgName","ARROW_LEFT","CustomRightArrow","ARROW_RIGHT","additionalTransfrom","arrows","centerMode","customLeftArrow","customRightArrow","customTransition","dotListClass","draggable","focusOnSelect","infinite","itemClass","minimumTouchDrag","renderArrowsWhenDisabled","renderButtonGroupOutside","renderDotsOutside","responsive","desktop","breakpoint","max","min","items","tablet","mobile","rtl","showDots","sliderClass","slidesToSlide","swipeable","map","img","index","to","_id","src","alt","StayPreview","geoLocation","isMobile","lastStayElementRef","loggedInUser","useSelector","storeState","userModule","user","toRad","Value","Math","PI","dateRange","utilService","availableDates","daysFromToday","until","stayScore","stayService","reviews","ref","imgUrls","ev","preventDefault","stopPropagation","toggleWishlist","setAppModal","SET_APP_MODAL_LOGIN","onLikeClicked","wishlist","some","isStayWishlist","HEART_24_WHITE_STROKE_RED_FILL","HEART_24_WHITE_STROKE","loc","city","country","STAR_12","loaded","coordinates","distance","lat1","lon1","lat2","lon2","dLat","dLon","a","sin","cos","d","atan2","sqrt","calcCrow","lat","lng","lan","getDistance","type","price","StayList","stays","isLoading","systemModule","useIsMobile","length","useGeoLocation","useState","location","setLocation","onSuccess","coords","latitude","longitude","onError","error","code","message","useEffect","navigator","geolocation","getCurrentPosition","categoryImages","label","imgSrc","CategoryCarousel","images","selectedCategory","handleClick","isMobileDevice","window","innerWidth","ARROW_LEFT_FAT","ARROW_RIGHT_FAT","partialVisible","desktopSmall","tabletLarge","tabletMedium","tabletSmall","mobileLarge","mobileMedium","mobileSmall","rewind","CategoryFilter","setSelectedCategory","updateFilterBy","StayIndex","stayModule","filterBy","isSetParamsToFilterBy","isFilterExpanded","isLoadingMoreStays","page","isFinalPage","observer","useRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","console","log","loadMoreStays","observe","useStaysInfiniteScroll","loadStays","handleScroll","store","CLOSE_EXPANDED_HEADER","CLOSE_EXPANDED_HEADER_MODAL","REMOVE_UNCLICKABLE_BG","removeEventListener","addEventListener","name","content"],"sourceRoot":""}