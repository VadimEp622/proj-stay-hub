"use strict";(self.webpackChunkmy_react_starter=self.webpackChunkmy_react_starter||[]).push([[685],{3634:function(e,s,t){t.r(s),t.d(s,{UserTrips:function(){return D}});var r=t(4165),n=t(5861),a=t(9439),c=t(2791),i=t(7689),l=t(1306),o=t(6579),d=t(893),u=t(4456),h=t(3649),m=t(5875),p=t(184);function f(e){var s=e.exploreItem;return(0,p.jsxs)("section",{className:"to-do",children:[s.img?(0,p.jsx)("img",{src:s.img,alt:"to-do"}):(0,p.jsx)("article",{className:"show-more",children:(0,p.jsx)(m.Z,{svgName:h.bN})}),(0,p.jsxs)("article",{className:"todo-info",children:[(0,p.jsx)("h4",{children:s.title}),(0,p.jsxs)("span",{children:[s.amount," experiences"]})]})]})}function x(e){var s=e.trip;return(0,p.jsxs)("section",{className:"explore-things-to-do",children:[(0,p.jsxs)("h5",{className:"explore-title fs14",children:["Explore things to do near ",s.content.stayDetails.loc.city]}),(0,p.jsx)("section",{className:"things-to-do",children:s.content.explore.map((function(e){return(0,p.jsx)(f,{exploreItem:e},e.label)}))})]})}var j=t(5849);function g(e){var s=e.trip,t=s.content.stayDetails.loc,r=t.city,n=t.country,a=t.address,c=s.content.orderDetails,i=c.checkIn,l=c.checkOut,o=s.content.status,d=s.content.seller.fullname,u=s.content.stayDetails.image,h=j.Y.getFormattedTimeRange(i,l),m=a.substring(0,a.indexOf(","));return(0,p.jsxs)("section",{className:"reservation-container",children:[(0,p.jsxs)("article",{className:"reservation-info",children:[(0,p.jsxs)("section",{className:"reservation-header",children:[(0,p.jsx)("h2",{children:r}),(0,p.jsxs)("h5",{children:["Entire rental unit hosted by ",d]})]}),(0,p.jsxs)("section",{className:"reservation-date-destination-status flex space-between",children:[(0,p.jsx)("article",{className:"reservation-date flex column align-center",children:(0,p.jsx)("span",{children:h})}),(0,p.jsxs)("article",{className:"reservation-destination flex column align-center",children:[(0,p.jsx)("h4",{className:"fs16",children:m}),(0,p.jsx)("span",{className:"fs16",children:r}),(0,p.jsx)("span",{className:"fs14",children:n})]}),(0,p.jsxs)("article",{className:"reservation-confirmation flex column align-center",children:[(0,p.jsx)("span",{className:"ff-circular-semibold fs16",children:"Status:"}),(0,p.jsx)("h4",{className:"status ".concat(o.toLowerCase()," fs20"),children:o})]})]})]}),(0,p.jsx)("article",{className:"reservation-img flex",children:(0,p.jsx)("img",{src:u,alt:"stay"})})]})}function v(e){var s=e.trip,t=(0,u.Z)();return(0,p.jsxs)("section",{className:"upcoming-reservation-preview".concat(t?" mobile":""),children:[(0,p.jsx)(g,{trip:s}),!t&&(0,p.jsx)(x,{trip:s})]})}function N(e){var s=e.getUpcomingTrips,t=e.onSearchClick,r=s();return(0,p.jsx)("section",{className:"future-reservation-list",children:r&&r.length>0?r.map((function(e){return(0,p.jsx)(v,{trip:e},e._id)})):(0,p.jsxs)("section",{className:"no-trips",children:[(0,p.jsx)("h3",{className:"no-trips-header fs22 lh26",children:"No trips booked...yet!"}),(0,p.jsx)("p",{className:"fs16 lh24",children:"Time to dust off your bags and start planning your next adventure"}),(0,p.jsx)("button",{className:"fs16",onClick:function(e){return t(e)},children:"Start searching"})]})})}function b(e){var s=e.trip,t=s.content.stayDetails.image,r=s.content.stayDetails.loc.address,n=s.content.seller.fullname,a=s.content.orderDetails,c=a.checkIn,i=a.checkOut,l=j.Y.getFormattedTimeRange(c,i);return(0,p.jsxs)("section",{className:"past-trip flex",children:[(0,p.jsx)("article",{className:"past-trip-img",children:(0,p.jsx)("img",{src:t,alt:"stay"})}),(0,p.jsxs)("article",{className:"past-trip-info flex column space-evenly",children:[(0,p.jsx)("h4",{className:"fs14 lh20",children:r}),(0,p.jsxs)("span",{children:["Hosted by ",n]}),(0,p.jsx)("span",{children:l})]})]})}function k(e){var s=(0,e.getPastTrips)();return(0,p.jsx)("section",{className:"past-reservation-list",children:s.length>0?s.map((function(e){return(0,p.jsx)(b,{trip:e},e._id)})):[{content:{seller:{fullname:"Denzel"},orderDetails:{checkIn:"12/7/2022",checkOut:"12/11/2022"},stayDetails:{image:"https://a0.muscache.com/im/pictures/bcb75add-a00d-466b-ba7d-ef2fe8d8e7e6.jpg?im_w=1200",loc:{address:"Amsterdam"}}}},{content:{seller:{fullname:"Hrvoje"},orderDetails:{checkIn:"7/19/2020",checkOut:"7/24/2020"},stayDetails:{image:"https://a0.muscache.com/im/pictures/miso/Hosting-621355059288164481/original/1e01176e-da92-456e-b663-b8887483b87b.jpeg?im_w=1200",loc:{address:"Zadarska \u017eupanija, Croatia"}}}},{content:{seller:{fullname:"\u0393\u03b5\u03ce\u03c1\u03b3\u03b9\u03bf\u03c2"},orderDetails:{checkIn:"8/3/2017",checkOut:"8/12/2017"},stayDetails:{image:"https://a0.muscache.com/im/pictures/95435d63-6c09-43de-a28f-f13158c32356.jpg?im_w=1200",loc:{address:"Kampos, Greece"}}}}].map((function(e,s){return(0,p.jsx)(b,{trip:e},s)}))})}var y=t(513);function D(){var e=(0,o.C)((function(e){return e.userModule.user})),s=(0,o.C)((function(e){return e.orderModule.reqStatusLoadOrders})),t=(0,c.useState)([]),u=(0,a.Z)(t,2),h=u[0],m=u[1],f=(0,i.s0)(),x=(0,o.T)(),j=(0,c.useRef)(!1),g=(0,c.useCallback)((0,n.Z)((0,r.Z)().mark((function e(){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j.current=!0,e.next=4,x((0,d.sP)({userType:"buyer"})).unwrap();case 4:s=e.sent,m(s),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error fetching orders",e.t0),(0,l.oc)("Error fetching orders");case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),[x]);return(0,c.useEffect)((function(){e?j.current||g():f("/")}),[j,e,g,f]),"idle"===s||"pending"===s?(0,p.jsx)(y.a,{}):"failed"===s?(0,p.jsx)("p",{children:"Failed to load orders"}):(0,p.jsxs)("section",{className:"user-trips-page",children:[(0,p.jsx)("h1",{className:"page-title fs28",children:"Trips"}),(0,p.jsxs)("section",{className:"future-reservation-list-container",children:[(0,p.jsx)("h3",{className:"reservation-list-header fs20",children:"Upcoming reservations"}),(0,p.jsx)(N,{getUpcomingTrips:function(){var e=new Date;return h.filter((function(s){return new Date(s.content.orderDetails.checkOut)>e})).reverse()},onSearchClick:function(e){e.preventDefault(),e.stopPropagation(),f("/")}})]}),(0,p.jsxs)("section",{className:"past-reservation-list-container",children:[(0,p.jsx)("h3",{className:"reservation-list-header fs20",children:"Where you've been"}),(0,p.jsx)(k,{getPastTrips:function(){var e=new Date;return h.filter((function(s){return new Date(s.content.orderDetails.checkOut)<=e})).reverse()}})]})]})}}}]);
//# sourceMappingURL=685.77a1330a.chunk.js.map