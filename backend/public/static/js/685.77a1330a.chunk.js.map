{"version":3,"file":"static/js/685.77a1330a.chunk.js","mappings":"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","sources":["cmps/user-trips/future-reservations/reservation-preview/explore-list/explore-preview.jsx","cmps/user-trips/future-reservations/reservation-preview/explore-list.jsx","cmps/user-trips/future-reservations/reservation-preview/reservation-ticket.jsx","cmps/user-trips/future-reservations/reservation-preview.jsx","cmps/user-trips/future-reservation-list.jsx","cmps/user-trips/past-reservations/past-reservation-preview.jsx","cmps/user-trips/past-reservation-list.jsx","pages/user-trips.jsx"],"sourcesContent":["import { EYE } from '../../../../../services/svg.service.js'\r\nimport SvgHandler from '../../../../_reuseable-cmps/svg-handler.jsx'\r\n\r\n\r\nexport function ExplorePreview({ exploreItem }) {\r\n    return (\r\n        <section className='to-do'>\r\n            {exploreItem.img\r\n                ? <img src={exploreItem.img} alt='to-do' />\r\n                : <article className='show-more'><SvgHandler svgName={EYE} /></article>\r\n            }\r\n            <article className='todo-info'>\r\n                <h4>{exploreItem.title}</h4>\r\n                <span>{exploreItem.amount} experiences</span>\r\n            </article>\r\n        </section>\r\n    )\r\n}","import { ExplorePreview } from './explore-list/explore-preview.jsx'\r\n\r\nexport function ExploreList({ trip }) {\r\n\r\n    return (\r\n        <section className='explore-things-to-do'>\r\n            <h5 className='explore-title fs14'>Explore things to do near {trip.content.stayDetails.loc.city}</h5>\r\n            <section className='things-to-do'>\r\n                {trip.content.explore.map(exploreItem =>\r\n                    <ExplorePreview key={exploreItem.label} exploreItem={exploreItem} />\r\n                )}\r\n            </section>\r\n        </section>\r\n    )\r\n}","import { utilService } from '../../../../services/util.service.js'\r\n\r\n\r\n\r\n// TODO: improve font-size for different screen widths\r\n\r\nexport function ReservationTicket({ trip }) {\r\n\r\n    const { city, country, address } = trip.content.stayDetails.loc\r\n    const { checkIn, checkOut } = trip.content.orderDetails\r\n    const status = trip.content.status\r\n    const fullname = trip.content.seller.fullname\r\n    const stayImage = trip.content.stayDetails.image\r\n\r\n    const timeRange = utilService.getFormattedTimeRange(checkIn, checkOut)\r\n    const location = address.substring(0, address.indexOf(','))\r\n    return (\r\n        <section className='reservation-container'>\r\n\r\n            <article className='reservation-info'>\r\n\r\n                <section className='reservation-header'>\r\n                    <h2>{city}</h2>\r\n                    <h5>Entire rental unit hosted by {fullname}</h5>\r\n                </section>\r\n\r\n                <section className='reservation-date-destination-status flex space-between'>\r\n                    <article className='reservation-date flex column align-center'>\r\n                        <span>{timeRange}</span>\r\n                    </article>\r\n                    <article className='reservation-destination flex column align-center'>\r\n                        <h4 className='fs16'>{location}</h4>\r\n                        <span className='fs16'>{city}</span>\r\n                        <span className='fs14'>{country}</span>\r\n                    </article>\r\n                    <article className='reservation-confirmation flex column align-center'>\r\n                        <span className='ff-circular-semibold fs16'>Status:</span>\r\n                        <h4 className={`status ${status.toLowerCase()} fs20`}>{status}</h4>\r\n                    </article>\r\n                </section>\r\n\r\n            </article>\r\n\r\n            <article className='reservation-img flex'>\r\n                <img src={stayImage} alt='stay' />\r\n            </article>\r\n\r\n        </section>\r\n    )\r\n}","// Components\r\nimport useIsMobile from \"../../../customHooks/useIsMobile.js\"\r\nimport { ExploreList } from \"./reservation-preview/explore-list.jsx\"\r\nimport { ReservationTicket } from \"./reservation-preview/reservation-ticket.jsx\"\r\n\r\n\r\n// TODO: at 790px width, remove exploreList\r\n\r\nexport function ReservationPreview({ trip }) {\r\n    const isMobile = useIsMobile()\r\n    return (\r\n        <section className={`upcoming-reservation-preview${isMobile ? ' mobile' : ''}`}>\r\n            <ReservationTicket trip={trip} />\r\n            {!isMobile &&\r\n                <ExploreList trip={trip} />\r\n            }\r\n        </section>\r\n    )\r\n}","// Components\r\nimport { ReservationPreview } from './future-reservations/reservation-preview.jsx'\r\n\r\n\r\nexport function FutureReservationList({ getUpcomingTrips, onSearchClick }) {\r\n    const upcomingTrips = getUpcomingTrips()\r\n    return (\r\n        <section className='future-reservation-list'>\r\n            {upcomingTrips && upcomingTrips.length > 0\r\n                ? (upcomingTrips.map(trip =>\r\n                    <ReservationPreview trip={trip} key={trip._id} />\r\n                ))\r\n                : (\r\n                    <section className='no-trips'>\r\n                        <h3 className='no-trips-header fs22 lh26'>No trips booked...yet!</h3>\r\n                        <p className='fs16 lh24'>Time to dust off your bags and start planning your next adventure</p>\r\n                        <button className='fs16' onClick={(ev) => onSearchClick(ev)}>Start searching</button>\r\n                    </section>\r\n                )\r\n            }\r\n        </section>\r\n    )\r\n}","import { utilService } from '../../../services/util.service.js'\r\n\r\nexport function PastReservationPreview({ trip }) {\r\n\r\n    const stayImage = trip.content.stayDetails.image\r\n    const address = trip.content.stayDetails.loc.address\r\n    const host = trip.content.seller.fullname\r\n    const { checkIn, checkOut } = trip.content.orderDetails\r\n    const timeRange = utilService.getFormattedTimeRange(checkIn, checkOut)\r\n    return (\r\n        <section className='past-trip flex'>\r\n            <article className='past-trip-img'>\r\n                <img src={stayImage} alt='stay' />\r\n            </article>\r\n            <article className='past-trip-info flex column space-evenly'>\r\n                <h4 className='fs14 lh20'>{address}</h4>\r\n                <span>Hosted by {host}</span>\r\n                <span>{timeRange}</span>\r\n            </article>\r\n        </section>\r\n    )\r\n}","import { PastReservationPreview } from './past-reservations/past-reservation-preview.jsx'\r\n\r\n// TODO: make demo data come from util/order service\r\n\r\nexport function PastReservationList({ getPastTrips }) {\r\n\r\n    const pastTrips = getPastTrips()\r\n    const pastTripsDemoData = [\r\n        {\r\n            content: {\r\n                seller: {\r\n                    fullname: 'Denzel'\r\n                },\r\n                orderDetails: {\r\n                    checkIn: '12/7/2022',\r\n                    checkOut: '12/11/2022',\r\n                },\r\n                stayDetails: {\r\n                    image: 'https://a0.muscache.com/im/pictures/bcb75add-a00d-466b-ba7d-ef2fe8d8e7e6.jpg?im_w=1200',\r\n                    loc: {\r\n                        address: 'Amsterdam'\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        {\r\n            content: {\r\n                seller: {\r\n                    fullname: 'Hrvoje'\r\n                },\r\n                orderDetails: {\r\n                    checkIn: '7/19/2020',\r\n                    checkOut: '7/24/2020',\r\n                },\r\n                stayDetails: {\r\n                    image: 'https://a0.muscache.com/im/pictures/miso/Hosting-621355059288164481/original/1e01176e-da92-456e-b663-b8887483b87b.jpeg?im_w=1200',\r\n                    loc: {\r\n                        address: 'Zadarska županija, Croatia'\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        {\r\n            content: {\r\n                seller: {\r\n                    fullname: 'Γεώργιος'\r\n                },\r\n                orderDetails: {\r\n                    checkIn: '8/3/2017',\r\n                    checkOut: '8/12/2017',\r\n                },\r\n                stayDetails: {\r\n                    image: 'https://a0.muscache.com/im/pictures/95435d63-6c09-43de-a28f-f13158c32356.jpg?im_w=1200',\r\n                    loc: {\r\n                        address: 'Kampos, Greece'\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    ]\r\n\r\n    return (\r\n        <section className='past-reservation-list'>\r\n            {pastTrips.length > 0\r\n                ? pastTrips.map(trip =>\r\n                    <PastReservationPreview key={trip._id} trip={trip} />\r\n                )\r\n                : pastTripsDemoData.map((trip, index) =>\r\n                    <PastReservationPreview key={index} trip={trip} />\r\n                )\r\n            }\r\n        </section>\r\n    )\r\n}","// Node modules\r\nimport { useCallback, useEffect, useRef, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\n// Services\r\nimport { showErrorMsg } from '../services/event-bus.service.js'\r\n\r\n// Store\r\nimport { useAppDispatch, useAppSelector } from '../store/hooks'\r\nimport { loadOrders } from '../store/orderSlice'\r\n\r\n\r\n// Components\r\nimport { FutureReservationList } from '../cmps/user-trips/future-reservation-list.jsx'\r\nimport { PastReservationList } from '../cmps/user-trips/past-reservation-list.jsx'\r\nimport { Loader } from '../cmps/_reuseable-cmps/loader.jsx'\r\n\r\n\r\n// TODO: when fetching trips, perform loading animation, and only when finished fetching, render cmps\r\n\r\n\r\n// TODO: check why fetching of orders is not done through the store..., fix if possible\r\n\r\n\r\nexport function UserTrips() {\r\n    const loggedinUser = useAppSelector(storeState => storeState.userModule.user)\r\n    const reqStatusLoadOrders = useAppSelector(storeState => storeState.orderModule.reqStatusLoadOrders)\r\n    const [trips, setTrips] = useState([])\r\n    const navigate = useNavigate()\r\n    const dispatch = useAppDispatch()\r\n    const isRequestedOnceOnCmpLoadRef = useRef(false)\r\n\r\n\r\n    const handleLoadOrders = useCallback(async () => {\r\n        try {\r\n            isRequestedOnceOnCmpLoadRef.current = true\r\n            const orders = await dispatch(loadOrders({ userType: 'buyer' })).unwrap()\r\n            // console.log('orders', orders)\r\n            setTrips(orders)\r\n        } catch (error) {\r\n            console.log('Error fetching orders', error)\r\n            showErrorMsg('Error fetching orders')\r\n        }\r\n    }, [dispatch])\r\n\r\n    useEffect(() => {\r\n        if (!loggedinUser) navigate('/')\r\n        else if (!isRequestedOnceOnCmpLoadRef.current) {\r\n            handleLoadOrders()\r\n        }\r\n    }, [isRequestedOnceOnCmpLoadRef, loggedinUser, handleLoadOrders, navigate])\r\n\r\n\r\n    function onSearchClick(ev) {\r\n        ev.preventDefault()\r\n        ev.stopPropagation()\r\n        navigate('/')\r\n    }\r\n\r\n    function getUpcomingTrips() {\r\n        const currentDate = new Date()\r\n        const upcomingTrips = trips\r\n            .filter((trip) => new Date(trip.content.orderDetails.checkOut) > currentDate)\r\n            .reverse()\r\n        // console.log('upcomingTrips', upcomingTrips)\r\n        return upcomingTrips\r\n    }\r\n\r\n    function getPastTrips() {\r\n        const currentDate = new Date()\r\n        const pastTrips = trips\r\n            .filter((trip) => new Date(trip.content.orderDetails.checkOut) <= currentDate)\r\n            .reverse()\r\n        // console.log('pastTrips', pastTrips)\r\n        return pastTrips\r\n    }\r\n\r\n\r\n    if (reqStatusLoadOrders === 'idle' || reqStatusLoadOrders === 'pending') return <Loader />\r\n    if (reqStatusLoadOrders === 'failed') return <p>Failed to load orders</p>\r\n\r\n    return (\r\n        <section className='user-trips-page'>\r\n            <h1 className='page-title fs28'>Trips</h1>\r\n\r\n            <section className='future-reservation-list-container'>\r\n                <h3 className='reservation-list-header fs20'>Upcoming reservations</h3>\r\n                <FutureReservationList getUpcomingTrips={getUpcomingTrips} onSearchClick={onSearchClick} />\r\n            </section>\r\n\r\n            <section className='past-reservation-list-container'>\r\n                <h3 className='reservation-list-header fs20'>Where you've been</h3>\r\n                <PastReservationList getPastTrips={getPastTrips} />\r\n            </section>\r\n        </section>\r\n    )\r\n}\r\n"],"names":["ExplorePreview","exploreItem","className","img","src","alt","svgName","EYE","title","amount","ExploreList","trip","content","stayDetails","loc","city","explore","map","label","ReservationTicket","country","address","orderDetails","checkIn","checkOut","status","fullname","seller","stayImage","image","timeRange","utilService","location","substring","indexOf","toLowerCase","ReservationPreview","isMobile","useIsMobile","FutureReservationList","getUpcomingTrips","onSearchClick","upcomingTrips","length","_id","onClick","ev","PastReservationPreview","host","PastReservationList","pastTrips","getPastTrips","index","UserTrips","loggedinUser","useAppSelector","storeState","userModule","user","reqStatusLoadOrders","orderModule","useState","trips","setTrips","navigate","useNavigate","dispatch","useAppDispatch","isRequestedOnceOnCmpLoadRef","useRef","handleLoadOrders","useCallback","current","loadOrders","userType","unwrap","orders","console","log","showErrorMsg","useEffect","currentDate","Date","filter","reverse","preventDefault","stopPropagation"],"sourceRoot":""}