{"version":3,"file":"static/js/871.67a7689a.chunk.js","mappings":"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","sources":["cmps/stay-index/stay-list/stay-preview/preview-image-carousel.jsx","cmps/stay-index/stay-list/stay-preview.jsx","cmps/stay-index/stay-list.jsx","customHooks/useGeoLocation.js","services/category-images.service.js","cmps/stay-index/category-filter/category-carousel.jsx","cmps/stay-index/category-filter.jsx","pages/stay-index.jsx","customHooks/useStaysInfiniteScroll.js"],"sourcesContent":["import { Link } from 'react-router-dom'\r\nimport Carousel from 'react-multi-carousel'\r\nimport 'react-multi-carousel/lib/styles.css'\r\nimport { ARROW_LEFT, ARROW_RIGHT } from '../../../../services/svg.service.js'\r\nimport SvgHandler from '../../../_reuseable-cmps/svg-handler.jsx'\r\n\r\n\r\nexport function PreviewImageCarousel({ imgs, stay }) {\r\n\r\n    const CustomLeftArrow = ({ onClick }) => (\r\n        <button className='custom-arrow left' onClick={onClick} >\r\n            <SvgHandler svgName={ARROW_LEFT} />\r\n        </button >\r\n    )\r\n\r\n    const CustomRightArrow = ({ onClick }) => (\r\n        <button className='custom-arrow right' onClick={onClick}  >\r\n            <SvgHandler svgName={ARROW_RIGHT} />\r\n        </button >\r\n    )\r\n\r\n    const responsive = {\r\n        desktop: {\r\n            breakpoint: {\r\n                max: 3000,\r\n                min: 1024\r\n            },\r\n            items: 1,\r\n        },\r\n        tablet: {\r\n            breakpoint: {\r\n                max: 1024,\r\n                min: 464\r\n            },\r\n            items: 1,\r\n        },\r\n        mobile: {\r\n            breakpoint: {\r\n                max: 464,\r\n                min: 0\r\n            },\r\n            items: 1,\r\n        },\r\n    }\r\n\r\n    return (\r\n        <Carousel\r\n            additionalTransfrom={0}\r\n            arrows={true}\r\n            centerMode={false}\r\n            className='preview-image-carousel'\r\n            customLeftArrow={<CustomLeftArrow />}\r\n            customRightArrow={<CustomRightArrow />}\r\n            customTransition='transform 300ms ease-in-out'\r\n            dotListClass='dot-container'\r\n            draggable={false}\r\n            focusOnSelect={false}\r\n            infinite={false}\r\n            itemClass=''\r\n            minimumTouchDrag={80}\r\n            // removeArrowOnDeviceType={[\"tablet\", \"mobile\"]}\r\n            renderArrowsWhenDisabled={false}\r\n            renderButtonGroupOutside={false}\r\n            renderDotsOutside={false}\r\n            responsive={responsive}\r\n            rtl={false}\r\n            showDots={true}\r\n            sliderClass=''\r\n            slidesToSlide={1}\r\n            swipeable={true}\r\n        >\r\n            {\r\n                imgs.map((img, index) =>\r\n                    <Link key={index} to={`/stay/${stay._id}`}>\r\n                        <img\r\n                            src={img}\r\n                            alt={`stay-pic-${index}`}\r\n                        />\r\n                    </Link>\r\n                )\r\n            }\r\n        </Carousel>\r\n    )\r\n}\r\n","// Node modules\r\nimport { Link } from 'react-router-dom'\r\n\r\n// Services\r\nimport { stayService } from '../../../services/stay.service'\r\nimport { utilService } from '../../../services/util.service.js'\r\nimport { HEART_24_WHITE_STROKE, HEART_24_WHITE_STROKE_RED_FILL, STAR_12 } from '../../../services/svg.service.js'\r\n\r\n// Components\r\nimport { PreviewImageCarousel } from './stay-preview/preview-image-carousel.jsx'\r\nimport SvgHandler from '../../_reuseable-cmps/svg-handler.jsx'\r\n\r\n\r\n// **TODO: stay-preview should be a dumb component(!!!), that only display data, and not calculate inside it with functions(!!!)\r\n\r\nexport function StayPreview({ stay, geoLocation, isMobile, lastStayElementRef = null, isStayWishlist, onLikeClicked }) {\r\n    // function getResizeMobilePictures() {\r\n    // if (!isMobile) return stay.imgUrls\r\n\r\n    // const stayImages = stay.imgUrls.map((imgStr) => {\r\n    //     const strIdx = imgStr.indexOf('/upload/') + 8\r\n    //     const firstPart = imgStr.substring(0, strIdx)\r\n    //     const middlePart = 'c_fit,w_500/'\r\n    //     const lastPart = imgStr.substring(strIdx)\r\n    //     return firstPart + middlePart + lastPart\r\n    // })\r\n\r\n    // return stayImages\r\n    // }\r\n\r\n\r\n    function calcCrow(lat1, lon1, lat2, lon2) {\r\n        const R = 6371 // km\r\n        const dLat = toRad(lat2 - lat1)\r\n        const dLon = toRad(lon2 - lon1)\r\n        lat1 = toRad(lat1)\r\n        lat2 = toRad(lat2)\r\n\r\n        const a =\r\n            Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n            Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2)\r\n        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))\r\n        const d = R * c\r\n        return utilService.addCommas(d)\r\n    }\r\n\r\n    // Converts numeric degrees to radians\r\n    function toRad(Value) {\r\n        return Value * Math.PI / 180\r\n    }\r\n\r\n    function getDistance() {\r\n        const distance = calcCrow(geoLocation.coordinates.lat, geoLocation.coordinates.lng, stay.loc.lat, stay.loc.lan)\r\n        return `${distance} kilometers away`\r\n    }\r\n\r\n    // TODO: make it so that if user filtered by dates, don't display range for dates before those filtered dates,\r\n    //   in stay-preview\r\n    const dateRange = utilService.getStayPreviewDateRange(\r\n        stay.availableDates[0].daysFromToday,\r\n        stay.availableDates[0].until\r\n    )\r\n\r\n    const stayScore = stayService.getStayScore(stay.reviews)\r\n\r\n    return (\r\n        <section className='stay-preview' key={stay._id} ref={lastStayElementRef}>\r\n            <PreviewImageCarousel imgs={stay.imgUrls} stay={stay} />\r\n\r\n            <section className='heart-svg' onClick={(ev) => onLikeClicked(ev, stay._id)}>\r\n                <SvgHandler svgName={isStayWishlist(stay._id) ? HEART_24_WHITE_STROKE_RED_FILL : HEART_24_WHITE_STROKE} />\r\n            </section>\r\n\r\n            <Link to={`/stay/${stay._id}`}>\r\n                <section className='preview-info fs15'>\r\n\r\n                    <section className='preview-header flex space-between align-center'>\r\n                        <p className='ff-circular-semibold lh19'>{stay.loc.city}, {stay.loc.country}</p>\r\n                        <p className='review-score flex align-baseline lh19'>\r\n                            <SvgHandler svgName={STAR_12} />\r\n                            <span className='lh19'>{stayScore}</span>\r\n                        </p>\r\n                    </section>\r\n\r\n                    <p className='type-or-distance lh19'>\r\n                        {\r\n                            geoLocation.loaded && geoLocation?.coordinates\r\n                                ? getDistance()\r\n                                : stay.type || 'Other'\r\n                        }\r\n                    </p>\r\n\r\n                    <p className='date-range lh19'>{dateRange}</p>\r\n\r\n                    <p className='price-preview lh19'>\r\n                        <span className='ff-circular-semibold'>{`$${utilService.addCommas(stay.price)} `}</span>\r\n                        night\r\n                    </p>\r\n\r\n                </section>\r\n            </Link>\r\n        </section>\r\n    )\r\n}","// Store\r\nimport { useAppDispatch, useAppSelector } from '../../store/hooks'\r\nimport { toggleWishlistStay } from '../../store/wishlist-stay.slice'\r\nimport { systemSetAppModal } from '../../store/systemSlice'\r\n\r\n// Custom hooks\r\nimport useIsMobile from '../../customHooks/useIsMobile.js'\r\n\r\n// Services\r\nimport { SET_APP_MODAL_LOGIN } from '../../services/resources-strings.service'\r\n\r\n// Components\r\nimport { StayPreview } from './stay-list/stay-preview.jsx'\r\n\r\n\r\n// TODO: improve stay-list cmp structure + styling\r\n\r\nexport function StayList({ stays, geoLocation, lastStayElementRef = null, isStayWishlist }) {\r\n    const loggedinUser = useAppSelector(storeState => storeState.userModule.user)\r\n    const isMobile = useIsMobile()\r\n    const dispatch = useAppDispatch()\r\n\r\n\r\n    function onLikeClicked(ev, stayId) {\r\n        ev.preventDefault()\r\n        ev.stopPropagation()\r\n        if (!loggedinUser) {\r\n            dispatch(systemSetAppModal(SET_APP_MODAL_LOGIN))\r\n            return\r\n        }\r\n        dispatch(toggleWishlistStay({ stayId }))\r\n    }\r\n\r\n\r\n    return (\r\n        <section className='stay-list'>\r\n            {stays.map((stay, index) =>\r\n                <StayPreview key={stay._id} stay={stay} geoLocation={geoLocation} isMobile={isMobile}\r\n                    isStayWishlist={isStayWishlist} onLikeClicked={onLikeClicked}\r\n                    lastStayElementRef={(lastStayElementRef && stays.length === index + 1) ? lastStayElementRef : null}\r\n                />\r\n            )}\r\n        </section>\r\n    )\r\n}\r\n","import { useState, useEffect } from 'react'\r\n\r\n\r\n/**\r\n * @typedef {Object} Coordinates\r\n * @property {string} lat - The latitude.\r\n * @property {string} lng - The longitude.\r\n * \r\n * @typedef {Object} Error\r\n * @property {number} code - Error Type Code\r\n * @property {string} message - Error description\r\n * \r\n * @typedef {Object} Location\r\n * @property {boolean} loaded - Is geolocation loaded\r\n * @property {Coordinates} [coordinates] - geolocation coordinates object\r\n * @property {Error} [error] - Error object, if any error occurs\r\n */\r\n\r\n\r\n/**\r\n * @function\r\n * @returns {Location} - The location object. If geolocation is available and loaded, \r\n * the `coordinates` property will contain the latitude and longitude. If an error occurs \r\n * while trying to fetch the geolocation, the `error` property will contain the error code \r\n * and message.\r\n */\r\n\r\n\r\nexport default function useGeoLocation() {\r\n    const [location, setLocation] = useState({\r\n        loaded: false,\r\n        coordinates: { lat: '', lng: '' },\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (!('geolocation' in navigator)) {\r\n            onError({\r\n                code: 0,\r\n                message: 'Geolocation not supported',\r\n            })\r\n        }\r\n\r\n        navigator.geolocation.getCurrentPosition(onSuccess, onError)\r\n    }, [])\r\n\r\n\r\n    function onSuccess(location) {\r\n        setLocation({\r\n            loaded: true,\r\n            coordinates: {\r\n                lat: location.coords.latitude,\r\n                lng: location.coords.longitude,\r\n            },\r\n        })\r\n    }\r\n\r\n    function onError(error) {\r\n        setLocation({\r\n            loaded: true,\r\n            error: {\r\n                code: error.code,\r\n                message: error.message,\r\n            },\r\n        })\r\n    }\r\n\r\n    return location\r\n}","// *********************** IMAGE IMPORTS ***********************\r\nimport adapted from \"../assets/img/category-bar/adapted.jpeg\"\r\nimport aFrames from \"../assets/img/category-bar/a-frames.jpeg\"\r\nimport amazingPools from \"../assets/img/category-bar/amazing-pools.jpeg\"\r\nimport amazingViews from \"../assets/img/category-bar/amazing-views.jpeg\"\r\nimport arctic from \"../assets/img/category-bar/arctic.jpeg\"\r\nimport barns from \"../assets/img/category-bar/barns.jpeg\"\r\nimport beach from \"../assets/img/category-bar/beach.jpeg\"\r\nimport beachfront from \"../assets/img/category-bar/beachfront.jpeg\"\r\nimport bedAndBreakfast from \"../assets/img/category-bar/bed-and-breakfast.jpeg\"\r\nimport boats from \"../assets/img/category-bar/boats.jpeg\"\r\nimport cabins from \"../assets/img/category-bar/cabins.jpeg\"\r\nimport campers from \"../assets/img/category-bar/campers.jpeg\"\r\nimport camping from \"../assets/img/category-bar/camping.jpeg\"\r\nimport casasParticulares from \"../assets/img/category-bar/casas-particulares.jpeg\"\r\nimport castles from \"../assets/img/category-bar/castles.jpeg\"\r\nimport caves from \"../assets/img/category-bar/caves.jpeg\"\r\nimport chefsKitchens from \"../assets/img/category-bar/chefs-kitchens.jpeg\"\r\nimport containers from \"../assets/img/category-bar/containers.jpeg\"\r\nimport countrySide from \"../assets/img/category-bar/countryside.jpeg\"\r\nimport creativeSpaces from \"../assets/img/category-bar/creative-spaces.jpeg\"\r\nimport cycladicHomes from \"../assets/img/category-bar/cycladic-homes.jpeg\"\r\nimport dammusi from \"../assets/img/category-bar/dammusi.jpeg\"\r\nimport desert from \"../assets/img/category-bar/desert.jpeg\"\r\nimport design from \"../assets/img/category-bar/design.jpeg\"\r\nimport domes from \"../assets/img/category-bar/domes.jpeg\"\r\nimport earthHomes from \"../assets/img/category-bar/earth-homes.jpeg\"\r\nimport farms from \"../assets/img/category-bar/farms.jpeg\"\r\nimport golfing from \"../assets/img/category-bar/golfing.jpeg\"\r\nimport grandPianos from \"../assets/img/category-bar/grand-pianos.jpeg\"\r\nimport hanoks from \"../assets/img/category-bar/hanoks.jpeg\"\r\nimport historicalHomes from \"../assets/img/category-bar/historical-homes.jpeg\"\r\nimport houseBoats from \"../assets/img/category-bar/houseboats.jpeg\"\r\nimport iconicCities from \"../assets/img/category-bar/iconic-cities.jpeg\"\r\nimport islands from \"../assets/img/category-bar/islands.jpeg\"\r\nimport lake from \"../assets/img/category-bar/lake.jpeg\"\r\nimport lakefront from \"../assets/img/category-bar/lakefront.jpeg\"\r\nimport luxe from \"../assets/img/category-bar/luxe.jpeg\"\r\nimport mansions from \"../assets/img/category-bar/mansions.jpeg\"\r\nimport minsus from \"../assets/img/category-bar/minsus.jpeg\"\r\nimport nationalParks from \"../assets/img/category-bar/national-parks.jpeg\"\r\nimport New from \"../assets/img/category-bar/new.jpeg\"\r\nimport offTheGrid from \"../assets/img/category-bar/off-the-grid.jpeg\"\r\nimport omg from \"../assets/img/category-bar/omg.jpeg\"\r\nimport play from \"../assets/img/category-bar/play.jpeg\"\r\nimport riads from \"../assets/img/category-bar/riads.jpeg\"\r\nimport rooms from \"../assets/img/category-bar/rooms.jpeg\"\r\nimport ryokans from \"../assets/img/category-bar/ryokans.jpeg\"\r\nimport shepherdsHuts from \"../assets/img/category-bar/shepherds-huts.jpeg\"\r\nimport skiing from \"../assets/img/category-bar/skiing.jpeg\"\r\nimport skiInOut from \"../assets/img/category-bar/ski-in-out.jpeg\"\r\nimport surfing from \"../assets/img/category-bar/surfing.jpeg\"\r\nimport topOfTheWorld from \"../assets/img/category-bar/top-of-the-world.jpeg\"\r\nimport towers from \"../assets/img/category-bar/towers.jpeg\"\r\nimport trending from \"../assets/img/category-bar/trending.jpeg\"\r\nimport tropical from \"../assets/img/category-bar/tropical.jpeg\"\r\nimport trulli from \"../assets/img/category-bar/trulli.jpeg\"\r\nimport vineyards from \"../assets/img/category-bar/vineyards.jpeg\"\r\nimport tinyHomes from \"../assets/img/category-bar/tiny-homes.jpeg\"\r\nimport treehouses from \"../assets/img/category-bar/treehouses.jpeg\"\r\nimport windmills from \"../assets/img/category-bar/windmills.jpeg\"\r\nimport yurts from \"../assets/img/category-bar/yurts.jpeg\"\r\nimport all from \"../assets/img/category-bar/all.jpeg\"\r\n\r\n\r\n\r\nexport const categoryImages = [\r\n    {\r\n        labelName: \"All\",\r\n        imgSrc: all\r\n    },\r\n    {\r\n        labelName: \"OMG!\",\r\n        imgSrc: omg\r\n    },\r\n    {\r\n        labelName: \"Trending\",\r\n        imgSrc: trending\r\n    },\r\n    {\r\n        labelName: \"Rooms\",\r\n        imgSrc: rooms\r\n    },\r\n    {\r\n        labelName: \"Cabins\",\r\n        imgSrc: cabins\r\n    },\r\n    {\r\n        labelName: \"Design\",\r\n        imgSrc: design\r\n    },\r\n    {\r\n        labelName: \"Beach\",\r\n        imgSrc: beach\r\n    },\r\n    {\r\n        labelName: \"Desert\",\r\n        imgSrc: desert\r\n    },\r\n    {\r\n        labelName: \"Mansions\",\r\n        imgSrc: mansions\r\n    },\r\n    {\r\n        labelName: \"Beachfront\",\r\n        imgSrc: beachfront\r\n    },\r\n    {\r\n        labelName: \"Amazing views\",\r\n        imgSrc: amazingViews\r\n    },\r\n    {\r\n        labelName: \"Amazing pools\",\r\n        imgSrc: amazingPools\r\n    },\r\n    {\r\n        labelName: \"Luxe\",\r\n        imgSrc: luxe\r\n    },\r\n    {\r\n        labelName: \"Lakefront\",\r\n        imgSrc: lakefront\r\n    },\r\n    {\r\n        labelName: \"Castles\",\r\n        imgSrc: castles\r\n    },\r\n    {\r\n        labelName: \"Tropical\",\r\n        imgSrc: tropical\r\n    },\r\n    {\r\n        labelName: \"Countryside\",\r\n        imgSrc: countrySide\r\n    },\r\n    {\r\n        labelName: \"Islands\",\r\n        imgSrc: islands\r\n    },\r\n    {\r\n        labelName: \"National parks\",\r\n        imgSrc: nationalParks\r\n    },\r\n    {\r\n        labelName: \"Farms\",\r\n        imgSrc: farms\r\n    },\r\n    {\r\n        labelName: \"Vineyards\",\r\n        imgSrc: vineyards\r\n    },\r\n    {\r\n        labelName: \"Boats\",\r\n        imgSrc: boats\r\n    },\r\n    {\r\n        labelName: \"Off-the-grid\",\r\n        imgSrc: offTheGrid\r\n    },\r\n    {\r\n        labelName: \"New\",\r\n        imgSrc: New\r\n    },\r\n    {\r\n        labelName: \"Treehouses\",\r\n        imgSrc: treehouses\r\n    },\r\n    {\r\n        labelName: \"Tiny homes\",\r\n        imgSrc: tinyHomes\r\n    },\r\n    {\r\n        labelName: \"Iconic cities\",\r\n        imgSrc: iconicCities\r\n    },\r\n    {\r\n        labelName: \"Camping\",\r\n        imgSrc: camping\r\n    },\r\n    {\r\n        labelName: \"Earth homes\",\r\n        imgSrc: earthHomes\r\n    },\r\n    {\r\n        labelName: \"Skiing\",\r\n        imgSrc: skiing\r\n    },\r\n    {\r\n        labelName: \"Caves\",\r\n        imgSrc: caves\r\n    },\r\n    {\r\n        labelName: \"Creative spaces\",\r\n        imgSrc: creativeSpaces\r\n    },\r\n    {\r\n        labelName: \"Cycladic homes\",\r\n        imgSrc: cycladicHomes\r\n    },\r\n    {\r\n        labelName: \"Top-of-the-world\",\r\n        imgSrc: topOfTheWorld\r\n    },\r\n    {\r\n        labelName: \"Arctic\",\r\n        imgSrc: arctic\r\n    },\r\n    {\r\n        labelName: \"Surfing\",\r\n        imgSrc: surfing\r\n    },\r\n    {\r\n        labelName: \"Play\",\r\n        imgSrc: play\r\n    },\r\n    {\r\n        labelName: \"Riads\",\r\n        imgSrc: riads\r\n    },\r\n    {\r\n        labelName: \"Houseboats\",\r\n        imgSrc: houseBoats\r\n    },\r\n    {\r\n        labelName: \"Grand pianos\",\r\n        imgSrc: grandPianos\r\n    },\r\n    {\r\n        labelName: \"Domes\",\r\n        imgSrc: domes\r\n    },\r\n    {\r\n        labelName: \"Yurts\",\r\n        imgSrc: yurts\r\n    },\r\n    {\r\n        labelName: \"Bed & breakfast\",\r\n        imgSrc: bedAndBreakfast\r\n    },\r\n    {\r\n        labelName: \"Historical homes\",\r\n        imgSrc: historicalHomes\r\n    },\r\n\r\n    {\r\n        labelName: \"Ski-in/out\",\r\n        imgSrc: skiInOut\r\n    },\r\n    {\r\n        labelName: \"A-frames\",\r\n        imgSrc: aFrames\r\n    },\r\n    {\r\n        labelName: \"Containers\",\r\n        imgSrc: containers\r\n    },\r\n    {\r\n        labelName: \"Ryokans\",\r\n        imgSrc: ryokans\r\n    },\r\n    {\r\n        labelName: \"Casas particulares\",\r\n        imgSrc: casasParticulares\r\n    },\r\n    {\r\n        labelName: \"Barns\",\r\n        imgSrc: barns\r\n    },\r\n    {\r\n        labelName: \"Dammusi\",\r\n        imgSrc: dammusi\r\n    },\r\n    {\r\n        labelName: \"Chef's kitchens\",\r\n        imgSrc: chefsKitchens\r\n    },\r\n    {\r\n        labelName: \"Minsus\",\r\n        imgSrc: minsus\r\n    },\r\n    {\r\n        labelName: \"Towers\",\r\n        imgSrc: towers\r\n    },\r\n    {\r\n        labelName: \"Shepherd's huts\",\r\n        imgSrc: shepherdsHuts\r\n    },\r\n    {\r\n        labelName: \"Hanoks\",\r\n        imgSrc: hanoks\r\n    },\r\n    {\r\n        labelName: \"Windmills\",\r\n        imgSrc: windmills\r\n    },\r\n    {\r\n        labelName: \"Golfing\",\r\n        imgSrc: golfing\r\n    },\r\n    {\r\n        labelName: \"Campers\",\r\n        imgSrc: campers\r\n    },\r\n    {\r\n        labelName: \"Adapted\",\r\n        imgSrc: adapted\r\n    },\r\n    {\r\n        labelName: \"Trulli\",\r\n        imgSrc: trulli\r\n    },\r\n    {\r\n        labelName: \"Lake\",\r\n        imgSrc: lake\r\n    }\r\n]","// Node modules\r\nimport Carousel from 'react-multi-carousel'\r\nimport 'react-multi-carousel/lib/styles.css'\r\n\r\n// Services\r\nimport { ARROW_LEFT_FAT, ARROW_RIGHT_FAT } from '../../../services/svg.service.js'\r\n\r\n// Components\r\nimport SvgHandler from '../../_reuseable-cmps/svg-handler.jsx'\r\n\r\n\r\n\r\nexport function CategoryCarousel({ images, selectedCategory, handleClick }) {\r\n    const isMobileDevice = window.innerWidth <= 464\r\n\r\n    const CustomLeftArrow = ({ onClick }) => (\r\n        <section className='custom-arrow-container left'>\r\n            <button className='custom-arrow left' onClick={onClick} >\r\n                <SvgHandler svgName={ARROW_LEFT_FAT} />\r\n            </button >\r\n        </section>\r\n    )\r\n\r\n    const CustomRightArrow = ({ onClick }) => (\r\n        <section className='custom-arrow-container right'>\r\n            <button className='custom-arrow right' onClick={onClick}  >\r\n                <SvgHandler svgName={ARROW_RIGHT_FAT} />\r\n            </button >\r\n        </section>\r\n    )\r\n\r\n    const responsive = {\r\n        desktop: {\r\n            breakpoint: {\r\n                max: 3000,\r\n                min: 1700\r\n            },\r\n            items: 17,\r\n            slidesToSlide: 6\r\n        },\r\n        desktopSmall: {\r\n            breakpoint: {\r\n                max: 1700,\r\n                min: 1400\r\n            },\r\n            items: 13,\r\n            slidesToSlide: 6\r\n        },\r\n        tabletLarge: {\r\n            breakpoint: {\r\n                max: 1400,\r\n                min: 1200\r\n            },\r\n            items: 11,\r\n            slidesToSlide: 3\r\n        },\r\n        tabletMedium: {\r\n            breakpoint: {\r\n                max: 1200,\r\n                min: 1000\r\n            },\r\n            items: 9,\r\n            slidesToSlide: 3\r\n        },\r\n        tabletSmall: {\r\n            breakpoint: {\r\n                max: 1000,\r\n                min: 800\r\n            },\r\n            items: 7,\r\n            slidesToSlide: 3\r\n        },\r\n        mobileLarge: {\r\n            breakpoint: {\r\n                max: 800,\r\n                min: 599\r\n            },\r\n            items: 6,\r\n            slidesToSlide: 3\r\n        },\r\n        mobileMedium: {\r\n            breakpoint: {\r\n                max: 599,\r\n                min: 500\r\n            },\r\n            items: 4,\r\n            slidesToSlide: 3\r\n        },\r\n        mobileSmall: {\r\n            breakpoint: {\r\n                max: 500,\r\n                min: 400\r\n            },\r\n            items: 3,\r\n            slidesToSlide: 2\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Carousel\r\n            centerMode={false}\r\n            draggable={isMobileDevice}\r\n            partialVisible={false}\r\n            customLeftArrow={<CustomLeftArrow />}\r\n            customRightArrow={<CustomRightArrow />}\r\n            minimumTouchDrag={80}\r\n            renderArrowsWhenDisabled={false}\r\n            arrows\r\n            className='category-bar'\r\n            itemClass='category-item width-100-percent'\r\n            renderButtonGroupOutside={false}\r\n            responsive={responsive}\r\n            rewind={true}\r\n            rtl={false}\r\n            slidesToSlide={1}\r\n            swipeable={true}\r\n            infinite={false}\r\n        >\r\n            {\r\n                images.map((img, index) => (\r\n                    <section\r\n                        key={index}\r\n                        className={`img-container${selectedCategory === img.labelName ? ' active' : ''}`}\r\n                        onClick={(ev) => handleClick(ev, img.labelName)}\r\n                    >\r\n                        <img\r\n                            key={index}\r\n                            src={img.imgSrc}\r\n                            alt={index}\r\n                        />\r\n                        <label><span>{img.labelName}</span></label>\r\n                    </section>\r\n                ))\r\n            }\r\n        </Carousel>\r\n    )\r\n}","// Node modules\r\nimport { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\n// Store\r\nimport { useAppSelector } from '../../store/hooks'\r\n\r\n// Services\r\nimport { categoryImages } from '../../services/category-images.service.js'\r\n\r\n// Components\r\nimport { CategoryCarousel } from './category-filter/category-carousel.jsx'\r\nimport { stayService } from '../../services/stay.service'\r\nimport { utilService } from '../../services/util.service'\r\n\r\n\r\n\r\n// TODO: fix 'All' category click area is too small\r\n\r\n\r\nexport function CategoryFilter() {\r\n    const [selectedCategory, setSelectedCategory] = useState('All')\r\n    const storeFilterBy = useAppSelector(storeState => storeState.stayModule.filterBy)\r\n    const navigate = useNavigate()\r\n\r\n\r\n    useEffect(() => {\r\n        if (!storeFilterBy.label || storeFilterBy.label === 'All') setSelectedCategory('All')\r\n        else setSelectedCategory(storeFilterBy.label)\r\n    }, [storeFilterBy])\r\n\r\n\r\n    function handleClick(ev, label) {\r\n        ev.preventDefault()\r\n        setSelectedCategory(label)\r\n        const filter = createFilterObject(storeFilterBy, label)\r\n        const searchParamsString = createQueryString(filter)\r\n        navigate(`/?${searchParamsString}`)\r\n    }\r\n\r\n    function createFilterObject(filterBy, label) {\r\n        const filter = stayService.getEmptyFilterBy()\r\n\r\n        if (filterBy.where) filter.where = filterBy.where\r\n        if (filterBy.from) {\r\n            filter.from = filterBy.from\r\n            if (!filterBy.to) filter.to = filterBy.from + utilService.getTimeDiffBy('day')//if picked ONLY check-in date\r\n            else filter.to = filterBy.to\r\n        }\r\n        if (filterBy.capacity) filter.capacity = filterBy.capacity\r\n        if (filterBy.guests) filter.guests = filterBy.guests\r\n\r\n        filter.label = label\r\n        return filter\r\n    }\r\n\r\n    function createQueryString(data = {}) {\r\n        return Object.keys(data).map(key => {\r\n            let val = data[key]\r\n            if (val !== null && typeof val === 'object') val = createQueryString(val)\r\n            return `${key}=${encodeURIComponent(`${val}`.replace(/\\s/g, '_'))}`\r\n        }).join('&')\r\n    }\r\n\r\n    return (\r\n        <section className='category-filter'>\r\n            <section className='category-carousel-container'>\r\n                <CategoryCarousel images={categoryImages} selectedCategory={selectedCategory} handleClick={handleClick} />\r\n            </section>\r\n        </section>\r\n    )\r\n}\r\n","// Node Modules\r\nimport { useEffect } from 'react'\r\nimport { Helmet } from 'react-helmet-async'\r\n\r\n// Store\r\nimport { useAppDispatch, useAppSelector } from '../store/hooks'\r\nimport { systemSetIsExpandedHeader, systemSetIsExpandedHeaderModal, systemSetIsUnclickableBg } from '../store/systemSlice'\r\nimport { loadStays, loadWishlistedStayIds } from '../store/staySlice'\r\n\r\n// Custom hook\r\nimport useGeoLocation from '../customHooks/useGeoLocation.js'\r\nimport useStaysInfiniteScroll from '../customHooks/useStaysInfiniteScroll.js'\r\n\r\n// Components\r\nimport { CategoryFilter } from '../cmps/stay-index/category-filter.jsx'\r\nimport { StayList } from '../cmps/stay-index/stay-list.jsx'\r\nimport { Loader } from '../cmps/_reuseable-cmps/loader.jsx'\r\n\r\n// NOTE: on homepage (stay-index) route, loadStays can be requested more than once, based on changes on query params values.\r\n//          The homepage (stay-index) route is NOT changed.\r\n//          Beacause of this, the isRequestedOnceOnCmpLoadRef, used for preventing initial duplicate loadStays requests, cannot be used here.\r\n//          Instead, we added in redux stay slice's loadStays createAsyncThunk, condition to prevent duplicate requests.\r\n\r\n\r\nexport function StayIndex() {\r\n    const stays = useAppSelector(storeState => storeState.stayModule.stays)\r\n    const filterBy = useAppSelector(storeState => storeState.stayModule.filterBy)\r\n    const loggedinUser = useAppSelector(storeState => storeState.userModule.user)\r\n    const wishlistIds = useAppSelector(storeState => storeState.stayModule.wishlistIds)\r\n    const isSetParamsToFilterBy = useAppSelector(storeState => storeState.stayModule.isSetParamsToFilterBy)\r\n    const isFilterExpanded = useAppSelector(storeState => storeState.systemModule.isFilterExpanded)\r\n    const geoLocation = useGeoLocation()\r\n    const [reqStatusLoadStays, lastStayElementRef] = useStaysInfiniteScroll(filterBy)\r\n    const dispatch = useAppDispatch()\r\n\r\n\r\n    // Fetch stays on first load, \r\n    // OR when navigated to homepage (stay-index) with changed params, which updated store filterBy\r\n    useEffect(() => {\r\n        if (isSetParamsToFilterBy) {\r\n            dispatch(loadStays({ filterBy, isFirstBatch: true }))\r\n        }\r\n    }, [dispatch, filterBy, isSetParamsToFilterBy, reqStatusLoadStays])\r\n\r\n    // ONLY when loggedin, \r\n    // Fetch wishlistedIds on first load,\r\n    // OR when navigated to homepage (stay-index) with changed params, which updated store filterBy\r\n    useEffect(() => {\r\n        if (isSetParamsToFilterBy && loggedinUser) {\r\n            dispatch(loadWishlistedStayIds({ filterBy }))\r\n        }\r\n    }, [dispatch, filterBy, isSetParamsToFilterBy, loggedinUser])\r\n\r\n\r\n\r\n    // TODO: currently only works as in stay-index, it needs to work across the whole app, + make into custom hook\r\n    useEffect(() => {\r\n        function handleScroll() {\r\n            if (isFilterExpanded) {\r\n                dispatch(systemSetIsExpandedHeader(false))\r\n                dispatch(systemSetIsExpandedHeaderModal(false))\r\n                dispatch(systemSetIsUnclickableBg(false))\r\n            }\r\n            window.removeEventListener('scroll', handleScroll)\r\n        }\r\n\r\n        window.addEventListener('scroll', handleScroll)\r\n        return () => {\r\n            window.removeEventListener('scroll', handleScroll)\r\n        }\r\n    }, [dispatch, isFilterExpanded])\r\n\r\n\r\n    function isStayWishlist(stayId) {\r\n        return loggedinUser ? wishlistIds.some(wishlistId => wishlistId === stayId) : false\r\n    }\r\n\r\n\r\n    return (\r\n        <section className='stay-index'>\r\n            <Helmet>\r\n                <title>StayHub Stays</title>\r\n                <meta name='description' content='Check out our beautiful stays' />\r\n            </Helmet>\r\n            <CategoryFilter />\r\n            <StayList stays={stays} geoLocation={geoLocation} lastStayElementRef={lastStayElementRef} isStayWishlist={isStayWishlist} />\r\n            {(reqStatusLoadStays === \"pending\") && <Loader />}\r\n            {(reqStatusLoadStays === \"succeeded\") && stays.length === 0 && <h4>No stays available.</h4>}\r\n            {(reqStatusLoadStays === \"failed\") && <h4>Failed to load stays.</h4>}\r\n        </section >\r\n    )\r\n}\r\n","// Node modules\r\nimport { useCallback, useEffect, useRef } from \"react\"\r\n\r\n// Store\r\nimport { loadStays, loadWishlistedStayIds } from \"../store/staySlice\"\r\nimport { useAppDispatch, useAppSelector } from \"../store/hooks\"\r\n\r\n\r\n\r\nexport default function useStaysInfiniteScroll(filterBy) {\r\n    const reqStatusLoadStays = useAppSelector(storeState => storeState.stayModule.reqStatusLoadStays)\r\n    const loggedinUser = useAppSelector(storeState => storeState.userModule.user)\r\n    const page = useAppSelector(storeState => storeState.stayModule.page)\r\n    const isFinalPage = useAppSelector(storeState => storeState.stayModule.isFinalPage)\r\n    const dispatch = useAppDispatch()\r\n    const observer = useRef()\r\n\r\n\r\n    const lastStayElementRef = useCallback(node => {\r\n        if (reqStatusLoadStays === \"pending\") return\r\n        if (observer.current) observer.current.disconnect()\r\n        observer.current = new IntersectionObserver(entries => {\r\n            if (entries[0].isIntersecting && reqStatusLoadStays !== \"pending\" && !isFinalPage) {\r\n                dispatch(loadStays({ filterBy, page: page + 1, isFirstBatch: false }))\r\n                if (loggedinUser) dispatch(loadWishlistedStayIds({ filterBy, page: page + 1 }))\r\n            }\r\n        })\r\n        if (node) observer.current.observe(node)\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [reqStatusLoadStays, page, isFinalPage, loggedinUser])\r\n\r\n\r\n    // Cleanup function\r\n    useEffect(() => {\r\n        return () => {\r\n            if (observer.current) observer.current.disconnect()\r\n        }\r\n    }, [])\r\n\r\n\r\n    return [reqStatusLoadStays, lastStayElementRef]\r\n}"],"names":["PreviewImageCarousel","imgs","stay","CustomLeftArrow","onClick","className","svgName","ARROW_LEFT","CustomRightArrow","ARROW_RIGHT","additionalTransfrom","arrows","centerMode","customLeftArrow","customRightArrow","customTransition","dotListClass","draggable","focusOnSelect","infinite","itemClass","minimumTouchDrag","renderArrowsWhenDisabled","renderButtonGroupOutside","renderDotsOutside","responsive","desktop","breakpoint","max","min","items","tablet","mobile","rtl","showDots","sliderClass","slidesToSlide","swipeable","map","img","index","to","_id","src","alt","StayPreview","geoLocation","isMobile","lastStayElementRef","isStayWishlist","onLikeClicked","toRad","Value","Math","PI","dateRange","utilService","availableDates","daysFromToday","until","stayScore","stayService","reviews","ref","imgUrls","ev","HEART_24_WHITE_STROKE_RED_FILL","HEART_24_WHITE_STROKE","loc","city","country","STAR_12","loaded","coordinates","distance","lat1","lon1","lat2","lon2","dLat","dLon","a","sin","cos","d","atan2","sqrt","calcCrow","lat","lng","lan","getDistance","type","price","StayList","stays","loggedinUser","useAppSelector","storeState","userModule","user","useIsMobile","dispatch","useAppDispatch","stayId","preventDefault","stopPropagation","toggleWishlistStay","systemSetAppModal","SET_APP_MODAL_LOGIN","length","useGeoLocation","useState","location","setLocation","onSuccess","coords","latitude","longitude","onError","error","code","message","useEffect","navigator","geolocation","getCurrentPosition","categoryImages","labelName","imgSrc","CategoryCarousel","images","selectedCategory","handleClick","isMobileDevice","window","innerWidth","ARROW_LEFT_FAT","ARROW_RIGHT_FAT","partialVisible","desktopSmall","tabletLarge","tabletMedium","tabletSmall","mobileLarge","mobileMedium","mobileSmall","rewind","CategoryFilter","setSelectedCategory","storeFilterBy","stayModule","filterBy","navigate","useNavigate","createQueryString","data","Object","keys","key","val","encodeURIComponent","replace","join","label","searchParamsString","filter","where","from","capacity","guests","createFilterObject","StayIndex","wishlistIds","isSetParamsToFilterBy","isFilterExpanded","systemModule","reqStatusLoadStays","page","isFinalPage","observer","useRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","loadStays","isFirstBatch","loadWishlistedStayIds","observe","useStaysInfiniteScroll","handleScroll","systemSetIsExpandedHeader","systemSetIsExpandedHeaderModal","systemSetIsUnclickableBg","removeEventListener","addEventListener","name","content","some","wishlistId"],"sourceRoot":""}