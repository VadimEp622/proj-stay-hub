"use strict";(self.webpackChunkmy_react_starter=self.webpackChunkmy_react_starter||[]).push([[893],{9893:function(e,s,t){t.r(s),t.d(s,{UserDashboard:function(){return Z}});var a=t(2791),n=t(7689),r=t(6579),c=t(4936),i=t(1306),l=t(1413),o=t(4165),d=t(5861),u=t(9439),h=t(893),x=t(8911),j=t(5849),f=t(184);function m(e){var s=e.order,t=e.onApprove,a=e.onReject,n=s.content.status,r=s.content.buyer.img,c=s.content.buyer.fullname,i=s.content.buyer.joined,l=s.content.orderDetails,o=l.checkIn,d=l.checkOut,u=j.Y.getFormattedTimeRange(o,d);return(0,f.jsxs)("tr",{className:"flex",children:[(0,f.jsx)("td",{className:"guest-column",children:(0,f.jsxs)("section",{className:"order-guest flex align-center",children:[(0,f.jsx)("img",{src:r,alt:"guest"}),(0,f.jsxs)("article",{className:"name-and-join-date flex column",children:[(0,f.jsxs)("span",{className:"full-name",children:[" ",c]}),(0,f.jsxs)("span",{className:"join-date fs12",children:["Joined in ",i]})]})]})}),(0,f.jsx)("td",{className:"date-column",children:(0,f.jsx)("span",{className:"order-dates flex align-center",children:u})}),(0,f.jsx)("td",{className:"action-column",children:(0,f.jsx)("section",{className:"order-actions flex align-center",children:"Pending"===n?(0,f.jsxs)("article",{className:"actions flex column justify-center",children:[(0,f.jsx)("button",{className:"action-button approve",onClick:function(e){return t(e,s._id)},children:"Approve"}),(0,f.jsx)("button",{className:"action-button reject",onClick:function(e){return a(e,s._id)},children:"Reject"})]}):(0,f.jsx)("article",{className:"order-status ".concat(n.toLowerCase()," fs14"),children:n})})})]})}var p=t(513);function g(e){e.loggedinUser;var s=(0,r.T)(),t=(0,r.C)((function(e){return e.orderModule.reqStatusLoadOrders})),n=(0,r.C)((function(e){return e.orderModule.orders})),c=(0,a.useState)(x.X.getDemoOrders()),j=(0,u.Z)(c,2),g=j[0],b=j[1],v=(0,a.useRef)(!1),N=(0,a.useCallback)((0,d.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v.current=!0,e.next=4,s((0,h.sP)({userType:"all"}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Error fetching orders",e.t0),(0,i.oc)("Error fetching orders");case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),[s]);function y(e){var s=g.map((function(s){return s._id===e?(0,l.Z)((0,l.Z)({},s),{},{content:(0,l.Z)((0,l.Z)({},s.content),{},{status:"Approved"})}):s}));b(s)}function D(e){var s=g.map((function(s){return s._id===e?(0,l.Z)((0,l.Z)({},s),{},{content:(0,l.Z)((0,l.Z)({},s.content),{},{status:"Rejected"})}):s}));b(s)}function k(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.preventDefault(),e.stopPropagation(),a?y(t):s((0,h.TF)(t))}function Z(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.preventDefault(),e.stopPropagation(),a?D(t):s((0,h.xe)(t))}return(0,a.useEffect)((function(){v.current||N()}),[N,v]),"idle"===t||"pending"===t?(0,f.jsx)(p.a,{}):"failed"===t?(0,f.jsx)("p",{children:"Failed to load orders"}):(0,f.jsx)("section",{className:"order-list",children:(0,f.jsxs)("table",{children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{className:"flex",children:[(0,f.jsx)("th",{className:"guest-column",children:"Guest"}),(0,f.jsx)("th",{className:"date-column",children:"Dates"}),(0,f.jsx)("th",{className:"action-column",children:"Actions"})]})}),(0,f.jsxs)("tbody",{children:[n.map((function(e){return(0,f.jsx)(m,{order:e,onApprove:k,onReject:Z},e._id)})),0===n.length&&g.map((function(e){return(0,f.jsx)(m,{order:e,onApprove:function(e,s){return k(e,s,!0)},onReject:function(e,s){return Z(e,s,!0)}},e._id)}))]})]})})}var b=t(3623),v=t(5967);function N(e){var s=e.dashboardData,t={labels:s.labels,datasets:[{label:"Revenue generated per month",data:s.revenue,backgroundColor:["rgba(54, 162, 235, 0.5)","rgba(255, 206, 86, 0.5)","rgba(75, 192, 192, 0.5)","rgba(153, 102, 255, 0.5)","rgba(255, 159, 64, 0.5)","rgba(128, 0, 128, 0.5)"]}]};return(0,f.jsx)("section",{className:"chart-container flex justify-center",children:(0,f.jsx)(b.$Q,{options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Revenue overview"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return"$"+e}}},x:{grid:{display:!1}}}},data:t})})}v.kL.register(v.uw,v.f$,v.ZL,v.Dx,v.u,v.De);var y=t(4942);function D(e){var s=e.dashboardData,t={responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Occupancy rate"}},scales:(0,y.Z)({y:{beginAtZero:!0},x:{grid:{display:!1}}},"y",{grid:{display:!0}})},a={labels:s.labels,datasets:[{label:"Occupancy",data:s.occupancyRate,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]};return(0,f.jsx)("section",{className:"chart-container flex justify-center",children:(0,f.jsx)(b.x1,{options:t,data:a})})}function k(e){var s=e.dashboardData;var t=(s.revenue.reduce((function(e,s){return e+s}),0)/s.revenue.length).toLocaleString(void 0,{maximumFractionDigits:2});return(0,f.jsxs)("section",{className:"dashboard-statistics",children:[(0,f.jsxs)("article",{className:"statistics-revenue",children:[(0,f.jsx)("h2",{className:"statistics-header",children:"Total revenue"}),(0,f.jsxs)("section",{className:"statistics-body",children:[(0,f.jsxs)("article",{className:"flex space-between",children:[(0,f.jsx)("h3",{children:"Revenue:"}),(0,f.jsxs)("h3",{children:["$",t]})]}),(0,f.jsxs)("article",{className:"flex space-between",children:[(0,f.jsx)("h3",{children:"Occupancy:"}),(0,f.jsxs)("h3",{children:[61.83,"%"]})]})]})]}),(0,f.jsxs)("article",{className:"statistics-chart-bar",children:[(0,f.jsx)("h2",{className:"statistics-header",children:"Revenue per month"}),(0,f.jsx)(N,{dashboardData:s})]}),(0,f.jsxs)("article",{className:"statistics-chart-line",children:[(0,f.jsx)("h2",{className:"statistics-header",children:"Occupancy rate"}),(0,f.jsx)(D,{dashboardData:s})]})]})}function Z(){var e=(0,r.C)((function(e){return e.userModule.user})),s=(0,n.s0)(),t=c.W.getUserDashboardData();return(0,a.useEffect)((function(){e||((0,i.oc)("You must be logged in to view your listings"),s("/"))}),[e]),(0,f.jsxs)("section",{className:"dashboard-page",children:[(0,f.jsx)("h1",{className:"dashboard-page-title fs30",children:"My Dashboard"}),(0,f.jsx)(k,{dashboardData:t}),(0,f.jsx)(g,{loggedinUser:e})]})}v.kL.register(v.uw,v.f$,v.od,v.jn,v.Dx,v.u,v.De)}}]);
//# sourceMappingURL=893.6fc024fa.chunk.js.map